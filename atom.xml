<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>/</id>
    <title>anhoderçš„è¿›é˜¶æ—¥å¿—</title>
    <updated>2021-06-14T15:04:51.646Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="/"/>
    <link rel="self" href="/atom.xml"/>
    <subtitle>ä¸€å·çƒŸè‰ï¼Œæ»¡åŸé£çµ®ã€‚</subtitle>
    <logo>/images/avatar.png</logo>
    <icon>/favicon.ico</icon>
    <rights>All rights reserved 2021, anhoderçš„è¿›é˜¶æ—¥å¿—</rights>
    <entry>
        <title type="html"><![CDATA[PostgreSQLçš„jsonã€jsonbã€æ•°ç»„]]></title>
        <id>/post/kYHKCQzOh/</id>
        <link href="/post/kYHKCQzOh/">
        </link>
        <updated>2021-06-14T13:09:40.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ€è¿‘å·¥ä½œä¸­æ¥è§¦åˆ°PostgreSQLï¼Œæ‰€ä»¥ç¨å¾®å­¦ä¹ ä¸‹å®ƒçš„å‡ ç§æ•°æ®ç±»å‹ï¼š<code>json</code>ã€<code>jsonb</code>ã€æ•°ç»„ä»¥åŠç›¸å¯¹åº”çš„æ•°æ®æŸ¥è¯¢ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ€è¿‘å·¥ä½œä¸­æ¥è§¦åˆ°PostgreSQLï¼Œæ‰€ä»¥ç¨å¾®å­¦ä¹ ä¸‹å®ƒçš„å‡ ç§æ•°æ®ç±»å‹ï¼š<code>json</code>ã€<code>jsonb</code>ã€æ•°ç»„ä»¥åŠç›¸å¯¹åº”çš„æ•°æ®æŸ¥è¯¢ã€‚</p>
<!-- more -->
<blockquote>
<p>PostgreSQLä¸­å•å¼•å·ç”¨äºè¡¨ç¤ºå­—ç¬¦ä¸²å€¼ï¼ŒåŒå¼•å·ç”¨äºè¡¨ç¤ºç³»ç»Ÿæ ‡è¯†ç¬¦ï¼Œæ²¡æœ‰åå¼•å·`ã€‚</p>
</blockquote>
<h2 id="json-jsonb">JSONã€JSONB</h2>
<h3 id="jsonå’Œjsonbçš„å¼‚åŒ"><code>json</code>å’Œ<code>jsonb</code>çš„å¼‚åŒ</h3>
<p>åœ¨PostgreSQLä¸­ï¼Œ<code>json</code>å’Œ<code>jsonb</code>éƒ½æ˜¯ç”¨æ¥å­˜å‚¨<code>json</code>æ•°æ®çš„ã€‚</p>
<p>ä½¿ç”¨<code>json</code>ç±»å‹æ—¶ï¼ŒPostgreSQLä¼šå°†è¾“å…¥çš„<code>json</code>æ–‡æœ¬å­˜å‚¨èµ·æ¥ï¼ŒåŒ…æ‹¬å…¶ä¸­çš„ç©ºæ ¼ä»¥åŠé”®çš„é¡ºåºï¼Œåœ¨æŸ¥è¯¢ä½¿ç”¨æ—¶æ‰å»è§£æã€‚è€Œ<code>jsonb</code>ç±»å‹ä¼šå°†è¾“å…¥çš„<code>json</code>æ–‡æœ¬è§£æä¸ºå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œå­˜å‚¨ã€‚<code>jsonb</code>ç±»å‹ç›¸è¾ƒ<code>json</code>ç±»å‹è€Œè¨€æ›´é«˜æ•ˆï¼Œæ€§èƒ½æ›´å¥½ï¼Œä¸”æ”¯æŒå»ºç«‹ç´¢å¼•ã€‚</p>
<h3 id="jsonåŠjsonbçš„ç›¸å…³sqlæ“ä½œ"><code>json</code>åŠ<code>jsonb</code>çš„ç›¸å…³SQLæ“ä½œ</h3>
<h4 id="è¡¨çš„åˆ›å»º">è¡¨çš„åˆ›å»º</h4>
<pre><code class="language-sql">-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE test (
    id int not null primary key,
    attr_json json not null,
    attr_jsonb jsonb not null
);
</code></pre>
<h4 id="æ•°æ®æ’å…¥">æ•°æ®æ’å…¥</h4>
<pre><code class="language-sql">INSERT INTO test (id, attr_json, attr_jsonb)
VALUES (1, '{&quot;name&quot;:&quot;anhoder&quot;,&quot;age&quot;:18}', '{&quot;name&quot;:&quot;anhoder&quot;,&quot;age&quot;:18}'),
       (2, '{&quot;name&quot;:&quot;jane&quot;,&quot;age&quot;:34,&quot;son&quot;: {&quot;name&quot;:&quot;coco&quot;,&quot;age&quot;:1}}', '{&quot;name&quot;:&quot;jane&quot;,&quot;age&quot;:34,&quot;son&quot;: {&quot;name&quot;:&quot;coco&quot;,&quot;age&quot;:1}}'),
       (3, '{&quot;name&quot;:&quot;alan&quot;,&quot;age&quot;:35,&quot;son&quot;: {&quot;name&quot;:&quot;coney&quot;,&quot;age&quot;:1}}', '{&quot;name&quot;:&quot;alan&quot;,&quot;age&quot;:35,&quot;son&quot;: {&quot;name&quot;:&quot;coney&quot;,&quot;age&quot;:1}}'),
       (4, '{&quot;name&quot;:&quot;jojo&quot;,&quot;age&quot;:26}', '{&quot;name&quot;:&quot;jojo&quot;,&quot;age&quot;:26}');
</code></pre>
<p>æ’å…¥åçš„ç»“æœï¼š</p>
<figure data-type="image" tabindex="1"><img src="/post-images/1623679477303.png" alt="æ’å…¥ç»“æœ" loading="lazy"></figure>
<p>å¯è§<code>jsonb</code>ä¼šå¯¹æ•°æ®è¿›è¡Œè§£æåï¼Œå†è¿›è¡Œå­˜å‚¨ï¼Œ<code>json</code>åˆ™å­˜å‚¨åŸè¾“å…¥ã€‚</p>
<h4 id="æ•°æ®æŸ¥è¯¢">æ•°æ®æŸ¥è¯¢</h4>
<pre><code class="language-sql">-- -&gt; è·å–å¯¹è±¡çš„å±æ€§ï¼Œç»“æœä½œä¸ºjsonå¯¹è±¡ï¼›-&gt;&gt;è·å–å¯¹è±¡çš„å±æ€§ï¼Œç»“æœä½œä¸ºæ–‡æœ¬
select attr_json-&gt;'son'-&gt;'age' as son_age, attr_json-&gt;&gt;'son' as son_text from test;
</code></pre>
<figure data-type="image" tabindex="2"><img src="/post-images/1623680145772.png" alt="ç»“æœ1" loading="lazy"></figure>
<hr>
<pre><code class="language-sql">-- #&gt; æ ¹æ®è·¯å¾„è·å–ç»“æœä½œä¸ºjsonå¯¹è±¡ï¼›#&gt;&gt; æ ¹æ®è·¯å¾„è·å–ç»“æœä½œä¸ºæ–‡æœ¬(json, jsonbç»“æœä¸€è‡´)
select attr_json#&gt;'{son}'-&gt;'age' as son_age, attr_json#&gt;'{son,age}' as son_age2, attr_json#&gt;&gt;'{son}' as son_text from test;
</code></pre>
<figure data-type="image" tabindex="3"><img src="/post-images/1623680312500.png" alt="ç»“æœ2" loading="lazy"></figure>
<hr>
<pre><code class="language-sql">-- @&gt;å·¦è¾¹æ˜¯å¦åŒ…å«å³è¾¹ï¼›&lt;@å³è¾¹æ˜¯å¦åŒ…å«å·¦è¾¹ (jsonbå¯ç”¨)
select * from test where attr_jsonb@&gt;'{&quot;age&quot;:18}';
</code></pre>
<figure data-type="image" tabindex="4"><img src="/post-images/1623680487862.png" alt="ç»“æœ3" loading="lazy"></figure>
<hr>
<pre><code class="language-sql">-- ? æ˜¯å¦å­˜åœ¨å±æ€§
select * from test where attr_jsonb ? 'name';
</code></pre>
<hr>
<pre><code class="language-sql">-- ?| å­˜åœ¨æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªå±æ€§åˆ™ä¸ºtrue (jsonbå¯ç”¨)
select * from test where attr_jsonb ?| array ['son', 'name'];
</code></pre>
<figure data-type="image" tabindex="5"><img src="/post-images/1623680779281.png" alt="ç»“æœ4" loading="lazy"></figure>
<hr>
<pre><code class="language-sql">-- ?&amp; åŒæ—¶å­˜åœ¨æ•°ç»„ä¸­çš„æ‰€æœ‰å±æ€§åˆ™ä¸ºtrue (jsonbå¯ç”¨)
select * from test where attr_jsonb ?&amp; array ['son', 'name'];
</code></pre>
<figure data-type="image" tabindex="6"><img src="/post-images/1623680893730.png" alt="ç»“æœ5" loading="lazy"></figure>
<hr>
<pre><code class="language-sql">-- ::ä¸ºç±»å‹è½¬æ¢
select * from test where (attr_json-&gt;&gt;'age')::int&gt;20;
</code></pre>
<figure data-type="image" tabindex="7"><img src="/post-images/1623681132425.png" alt="ç»“æœ6" loading="lazy"></figure>
<h4 id="æ•°æ®æ›´æ–°">æ•°æ®æ›´æ–°</h4>
<pre><code class="language-sql">-- jsonb_set(jsonb old_jsonb, text[] path, jsonb new_jsonb, bool create_if_missing) æ›´æ–°jsonb 
update test set attr_jsonb=jsonb_set(attr_jsonb, '{son}', '{&quot;name&quot;:&quot;con&quot;,&quot;age&quot;:2}')
where (attr_jsonb#&gt;&gt;'{son,name}') = 'coco';
</code></pre>
<hr>
<pre><code class="language-sql">-- æ ¹æ®è·¯å¾„åˆ é™¤å±æ€§ (jsonbå¯ç”¨)
update test set attr_jsonb=attr_jsonb#-'{son,name}';
</code></pre>
<hr>
<pre><code class="language-sql">-- åˆ é™¤å±æ€§ (jsonbå¯ç”¨)
update test set attr_jsonb=attr_jsonb-'son' where attr_jsonb ? 'son';
</code></pre>
<h2 id="æ•°ç»„">æ•°ç»„</h2>
<pre><code class="language-sql">-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE test_arr (
    id int not null primary key,
    arr int[] not null
);

-- æ’å…¥æ•°æ®
insert into test_arr (id, arr) values (1, array[2,3,4]),(2, array[3,4,5]);

-- æ•°ç»„åˆå¹¶
select array[1,2,3,4] || array[2,3,4,5]; -- ç»“æœï¼š{1,2,3,4,2,3,4,5}
select 2 || array[2,3,4,5]; -- ç»“æœï¼š{2,2,3,4,5}

-- æ•°ç»„æ¯”è¾ƒï¼Œæ¯ä¸ªå…ƒç´ ä¾æ¬¡æ¯”è¾ƒå¤§å°
select array[1,2,3,4] &gt; array[1,2,3]; -- ç»“æœ: true
select array[1,2,3,4] &gt; array[1,2,4]; -- ç»“æœ: false

-- æ•°ç»„åŒ…å«å…³ç³»
select array[1,2,3] @&gt; array[2,3]; -- ç»“æœ: true
select array[1,2,3] @&gt; array[2,3,4]; -- ç»“æœ: false

-- æ•°ç»„æ˜¯å¦æœ‰å…±åŒå…ƒç´ 
select array[1,2,3] &amp;&amp; array[3,4,5]; -- ç»“æœ: true
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[musicfox 2.0â€”â€”golangé‡å†™ç‰ˆ]]></title>
        <id>/post/NOO340v6g/</id>
        <link href="/post/NOO340v6g/">
        </link>
        <updated>2021-05-14T12:51:23.000Z</updated>
        <summary type="html"><![CDATA[<p>musicfox 2.0ç»ˆäºå®Œæˆäº†ï¼Œæ²¡æœ‰å¤ªå¤šçš„åŠŸèƒ½å˜æ›´ï¼Œä¸»è¦ä½¿ç”¨golangè¿›è¡Œé‡å†™ï¼Œä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒï¼ˆä¸»è¦æ˜¯Windowsä¸‹ï¼‰ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>musicfox 2.0ç»ˆäºå®Œæˆäº†ï¼Œæ²¡æœ‰å¤ªå¤šçš„åŠŸèƒ½å˜æ›´ï¼Œä¸»è¦ä½¿ç”¨golangè¿›è¡Œé‡å†™ï¼Œä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒï¼ˆä¸»è¦æ˜¯Windowsä¸‹ï¼‰ã€‚</p>
<!-- more -->
<h2 id="å­˜åœ¨çš„é—®é¢˜ä¸æ–¹æ¡ˆ">å­˜åœ¨çš„é—®é¢˜ä¸æ–¹æ¡ˆ</h2>
<p>musicfoxæœ€å¼€å§‹æ˜¯ç”¨Dartå†™çš„ï¼Œå·¥ä½œåŸç†å¤§è‡´æ˜¯ä¸»è¿›ç¨‹forkä¸€ä¸ªmpg123çš„å­è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹å¤„ç†UIæ¸²æŸ“ã€ç”¨æˆ·äº¤äº’åŠç½‘ç»œè¯·æ±‚ç­‰ï¼Œç„¶åé€šè¿‡è¿›ç¨‹é—´ç®¡é“é€šä¿¡ï¼Œæ¥æ§åˆ¶mpg123å­è¿›ç¨‹çš„éŸ³ä¹æ’­æ”¾ã€æš‚åœä»¥åŠæ’­æ”¾å™¨çš„éŸ³é‡å¤§å°ç­‰ã€‚</p>
<p>è¿™ç§æ¨¡å¼ä¸‹ï¼Œä¼šå­˜åœ¨ä»¥ä¸‹è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>ä¾èµ–mpg123ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨å®‰è£…mpg123</li>
<li>mpg123åªèƒ½æ’­æ”¾mp3éŸ³ä¹ï¼Œç½‘æ˜“äº‘æ— æŸéŸ³è´¨æ˜¯flacæ ¼å¼ï¼Œæ— æ³•æ’­æ”¾</li>
<li>è¿›ç¨‹é—´éœ€è¦é€šè¿‡ç®¡é“è¿›è¡Œé€šä¿¡ï¼ŒWindowsä¸‹ä¸å®¹æ˜“å¤„ç†</li>
<li>Dartå¤§å¤šæ•°ä¸‰æ–¹åŒ…éƒ½æ˜¯åŸºäºFlutterçš„ï¼ŒåŸç”ŸåŒ…ä¸å¤š</li>
<li>...</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹é‡‡ç”¨golangè¿›è¡Œé‡å†™ï¼Œä¼˜åŠ¿ä¸»è¦æ˜¯ï¼š</p>
<ul>
<li>golangæ”¯æŒæ›´å¤šå¹³å°çš„äºŒè¿›åˆ¶ç¼–è¯‘</li>
<li>æ‹¥æœ‰ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¾‹å¦‚éŸ³é¢‘æ’­æ”¾çš„<a href="https://github.com/faiface/beep">beep</a>ã€TUIæ¸²æŸ“çš„<br>
<a href="https://github.com/charmbracelet/bubbletea">bubbletea</a>ã€æœ¬åœ°æ•°æ®åº“çš„<a href="https://github.com/boltdb/bolt">bolt</a>ç­‰ç­‰</li>
<li>ä¸éœ€è¦å€ŸåŠ©å…¶ä»–è¿›ç¨‹ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è¿›ç¨‹é€šä¿¡</li>
<li>æ”¯æŒmp3ã€flacã€wavç­‰æ ¼å¼éŸ³é¢‘æ–‡ä»¶çš„è§£ç æ’­æ”¾</li>
<li>goroutine + chan</li>
</ul>
<p>å¦å¤–å¯¹æˆ‘è‡ªå·±æ¥è¯´å¯ä»¥æ·±å…¥ç†Ÿæ‚‰golang...</p>
<h2 id="ä½¿ç”¨goæ—¶é‡åˆ°çš„é—®é¢˜">ä½¿ç”¨goæ—¶é‡åˆ°çš„é—®é¢˜</h2>
<h3 id="åç¨‹æ³„æ¼">åç¨‹æ³„æ¼</h3>
<p>åœ¨ä½¿ç”¨golangè¿‡ç¨‹ä¸­é‡åˆ°æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜å°±æ˜¯åç¨‹æ³„æ¼ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;runtime&quot;
)

func main() {
	c1 := make(chan struct{})
	for i := 0; i &lt; 10; i++ {
		go test(c1)
		fmt.Println(runtime.NumGoroutine())
	}
}

func test(c chan&lt;- struct{}) {
	c &lt;- struct{}{}
}
</code></pre>
<p>æ‰§è¡Œåä¼šè¾“å‡ºï¼š</p>
<pre><code>2
3
4
5
6
7
8
9
10
11
</code></pre>
<p>å¯è§ï¼Œåç¨‹æ•°ä¸€ç›´åœ¨å¢åŠ ï¼Œè¿™æ˜¯å› ä¸ºæ²¡æœ‰æ¶ˆè´¹è€…æ¶ˆè´¹chanä¸­çš„æ•°æ®ï¼Œæ‰€æœ‰å­åç¨‹éƒ½é˜»å¡åœ¨å†™chançš„æ“ä½œã€‚</p>
<p>ç±»ä¼¼è¿™ç§æƒ…å†µå°±ä¼šå¯¼è‡´åç¨‹æ•°ä¸æ–­å¢é•¿ï¼Œå‡ºç°åç¨‹æ³„æ¼ï¼Œå†…å­˜å ç”¨ä¸æ–­ä¸Šå‡ã€‚</p>
<h3 id="å¦‚ä½•å°½é‡é¿å…åç¨‹æ³„æ¼">å¦‚ä½•å°½é‡é¿å…åç¨‹æ³„æ¼</h3>
<ol>
<li>ç¡®ä¿chanéƒ½ä¼šæœ‰ç›¸åº”çš„æ¶ˆè´¹è€…ã€ç”Ÿäº§è€…ï¼Œä¸”ç”Ÿäº§é€Ÿåº¦å’Œæ¶ˆè´¹é€Ÿåº¦å·®ä¸å¤š</li>
<li>å¦‚æœéœ€è¦å¾€chanä¸­å‹æ•°æ®æˆ–è¯»æ•°æ®ï¼Œä½†åˆä¸ç¡®å®šæ˜¯å¦æœ‰æ¶ˆè´¹è€…æˆ–ç”Ÿäº§è€…ï¼Œå¯ä»¥ä½¿ç”¨<code>select</code>ç»“æ„é¿å…é˜»å¡</li>
<li>ä½¿ç”¨goroutine + chanå¤„ç†ï¼Œé¿å…åˆ›å»ºå¤§é‡åç¨‹ï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<pre><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;runtime&quot;
	&quot;time&quot;
)

func main() {
	var data [100]string
	// è·å–dataé€»è¾‘
	for _, v := range data {
		go test(v)
	}

	fmt.Println(runtime.NumGoroutine())
}

func test(s string) {
	// å‡è£…ä¸šåŠ¡é€»è¾‘
	time.Sleep(time.Millisecond)
}
</code></pre>
<p>è¾“å‡ºä¸º: 101ï¼Œä¹Ÿå°±æ˜¯æ–°å¼€äº†100ä¸ªåç¨‹ï¼Œå¦‚æœæ•°æ®æ›´å¤šæ—¶ï¼Œä¼šäº§ç”Ÿæ›´å¤šåç¨‹ã€‚è¿™ç§æƒ…å†µå¯ä»¥è€ƒè™‘åˆ›å»ºå›ºå®šæ•°é‡çš„è‹¥å¹²ä¸ªåç¨‹ï¼Œç„¶åé€šè¿‡chanå°†æ•°æ®æŠ•é€’ç»™å­åç¨‹è¿›è¡Œå¤„ç†ï¼Œé¿å…å¤§é‡åç¨‹å ç”¨å†…å­˜ï¼Œå¦‚ï¼š</p>
<pre><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;runtime&quot;
	&quot;time&quot;
)

func main() {
	var data [100]string
	c := make(chan string)

	for i := 0; i &lt; 5; i++ {
		go test(c)
	}

	for _, v := range data {
		c &lt;- v
	}

	fmt.Println(runtime.NumGoroutine())
}

func test(c &lt;-chan string) {
	for _ = range c {
        // ä¸šåŠ¡é€»è¾‘
		time.Sleep(time.Millisecond)
	}
}
</code></pre>
<h3 id="åç¨‹æ³„æ¼æ’æŸ¥">åç¨‹æ³„æ¼æ’æŸ¥</h3>
<ol>
<li>runtime.NumGoroutine()æŸ¥çœ‹åç¨‹æ•°</li>
<li>ä½¿ç”¨gopsæ’æŸ¥ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰åç¨‹æ•°ã€è°ƒç”¨æ ˆç­‰</li>
</ol>
<h2 id="é¢„è§ˆ">é¢„è§ˆ</h2>
<figure data-type="image" tabindex="1"><img src="/post-images/1620999111458.png" alt="preview1" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="/post-images/1620999246727.png" alt="preview2" loading="lazy"></figure>
<h2 id="å®‰è£…">å®‰è£…</h2>
<h3 id="mac">Mac</h3>
<p>æä¾›ä¸¤ç§æ–¹å¼å®‰è£…ï¼š</p>
<h4 id="ä½¿ç”¨brewå®‰è£…">ä½¿ç”¨brewå®‰è£…</h4>
<pre><code class="language-sh">brew tap anhoder/go-musicfox &amp;&amp; brew install go-musicfox
</code></pre>
<p>å¦‚æœä½ ä¹‹å‰å®‰è£…è¿‡musicfoxï¼Œéœ€è¦ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤é‡æ–°é“¾æ¥:</p>
<pre><code class="language-sh">brew unlink musicfox &amp;&amp; brew link --overwrite go-musicfox
</code></pre>
<h4 id="ç›´æ¥ä¸‹è½½">ç›´æ¥ä¸‹è½½</h4>
<p>ä¸‹è½½<a href="https://github.com/anhoder/go-musicfox/releases/latest/download/musicfox.mac">Macå¯æ‰§è¡Œæ–‡ä»¶</a>ï¼Œåœ¨iTermæˆ–Terminalä¸­æ‰“å¼€</p>
<h3 id="linux">Linux</h3>
<p>èº«è¾¹æ²¡æœ‰Linuxè®¾å¤‡ï¼Œè€Œæ’­æ”¾éŸ³ä¹ä¾èµ–CGOï¼Œæ— æ³•è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœ‰å¯ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶</p>
<h3 id="windows">Windows</h3>
<p>ä¸‹è½½<a href="https://github.com/anhoder/go-musicfox/releases/latest/download/musicfox.exe">Windowså¯æ‰§è¡Œæ–‡ä»¶</a>ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œå³å¯ã€‚</p>
<p><strong>æ¨èä½¿ç”¨Windows Terminalï¼ŒUIåŠä½“éªŒä¼šå¥½å¾ˆå¤š</strong></p>
<h2 id="å¿«æ·é”®">å¿«æ·é”®</h2>
<table>
<thead>
<tr>
<th>æŒ‰é”®</th>
<th>ä½œç”¨</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>h/H/LEFT</td>
<td>å·¦</td>
<td></td>
</tr>
<tr>
<td>l/L/RIGHT</td>
<td>å³</td>
<td></td>
</tr>
<tr>
<td>k/K/UP</td>
<td>ä¸Š</td>
<td></td>
</tr>
<tr>
<td>j/J/DOWN</td>
<td>ä¸‹</td>
<td></td>
</tr>
<tr>
<td>q/Q</td>
<td>é€€å‡º</td>
<td></td>
</tr>
<tr>
<td>space</td>
<td>æš‚åœ/æ’­æ”¾</td>
<td></td>
</tr>
<tr>
<td>[</td>
<td>ä¸Šä¸€æ›²</td>
<td></td>
</tr>
<tr>
<td>]</td>
<td>ä¸‹ä¸€æ›²</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>å‡å°éŸ³é‡</td>
<td></td>
</tr>
<tr>
<td>=</td>
<td>åŠ å¤§éŸ³é‡</td>
<td></td>
</tr>
<tr>
<td>n/N/ENTER</td>
<td>è¿›å…¥é€‰ä¸­çš„èœå•</td>
<td></td>
</tr>
<tr>
<td>b/B/ESC</td>
<td>è¿”å›ä¸Šçº§èœå•</td>
<td></td>
</tr>
<tr>
<td>w/W</td>
<td>é€€å‡ºå¹¶é€€å‡ºç™»å½•</td>
<td></td>
</tr>
<tr>
<td>p</td>
<td>åˆ‡æ¢æ’­æ”¾æ–¹å¼</td>
<td></td>
</tr>
<tr>
<td>P</td>
<td>å¿ƒåŠ¨æ¨¡å¼(ä»…åœ¨æ­Œå•ä¸­æ—¶æœ‰æ•ˆ)</td>
<td></td>
</tr>
<tr>
<td>r/R</td>
<td>é‡æ–°æ¸²æŸ“UI</td>
<td>Windowsè°ƒæ•´çª—å£å¤§å°åï¼Œæ²¡æœ‰äº‹ä»¶è§¦å‘ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ‰‹åŠ¨é‡æ–°æ¸²æŸ“</td>
</tr>
<tr>
<td>,</td>
<td>å–œæ¬¢å½“å‰æ’­æ”¾æ­Œæ›²</td>
<td></td>
</tr>
<tr>
<td>&lt;</td>
<td>å–œæ¬¢å½“å‰é€‰ä¸­æ­Œæ›²</td>
<td></td>
</tr>
<tr>
<td>.</td>
<td>å½“å‰æ’­æ”¾æ­Œæ›²ç§»é™¤å‡ºå–œæ¬¢</td>
<td></td>
</tr>
<tr>
<td>&gt;</td>
<td>å½“å‰é€‰ä¸­æ­Œæ›²ç§»é™¤å‡ºå–œæ¬¢</td>
<td></td>
</tr>
<tr>
<td>/</td>
<td>æ ‡è®°å½“å‰æ’­æ”¾æ­Œæ›²ä¸ºä¸å–œæ¬¢</td>
<td></td>
</tr>
<tr>
<td>?</td>
<td>æ ‡è®°å½“å‰é€‰ä¸­æ­Œæ›²ä¸ºä¸å–œæ¬¢</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="todo">TODO</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8391065"><label class="task-list-item-label" for="task-item-8391065"> æˆ‘çš„æ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-2300337"><label class="task-list-item-label" for="task-item-2300337"> æ¯æ—¥æ¨èæ­Œæ›²</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8991192"><label class="task-list-item-label" for="task-item-8991192"> æ¯æ—¥æ¨èæ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-1868604"><label class="task-list-item-label" for="task-item-1868604"> ç§äººFM</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-4894085"><label class="task-list-item-label" for="task-item-4894085"> æ­Œè¯æ˜¾ç¤º</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-5799736"><label class="task-list-item-label" for="task-item-5799736"> æ¬¢è¿ç•Œé¢</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-1829224"><label class="task-list-item-label" for="task-item-1829224"> æœç´¢</label>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-4360166"><label class="task-list-item-label" for="task-item-4360166"> æŒ‰æ­Œæ›²</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-9398398"><label class="task-list-item-label" for="task-item-9398398"> æŒ‰æ­Œæ‰‹</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-5299896"><label class="task-list-item-label" for="task-item-5299896"> æŒ‰æ­Œè¯</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8671828"><label class="task-list-item-label" for="task-item-8671828"> æŒ‰æ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-9774217"><label class="task-list-item-label" for="task-item-9774217"> æŒ‰ä¸“è¾‘</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-7587472"><label class="task-list-item-label" for="task-item-7587472"> æŒ‰ç”¨æˆ·</label></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-5069508"><label class="task-list-item-label" for="task-item-5069508"> æ’è¡Œæ¦œ</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-9894256"><label class="task-list-item-label" for="task-item-9894256"> ç²¾é€‰æ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8368697"><label class="task-list-item-label" for="task-item-8368697"> æœ€æ–°ä¸“è¾‘</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-6330233"><label class="task-list-item-label" for="task-item-6330233"> çƒ­é—¨æ­Œæ‰‹</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-7955695"><label class="task-list-item-label" for="task-item-7955695"> äº‘ç›˜</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-5418418"><label class="task-list-item-label" for="task-item-5418418"> æ’­æ”¾æ–¹å¼åˆ‡æ¢</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-7776581"><label class="task-list-item-label" for="task-item-7776581"> å–œæ¬¢/å–æ¶ˆå–œæ¬¢</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-171721"><label class="task-list-item-label" for="task-item-171721"> å¿ƒåŠ¨æ¨¡å¼/æ™ºèƒ½æ¨¡å¼</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8227347"><label class="task-list-item-label" for="task-item-8227347"> éŸ³ä¹ç”µå°</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-6413221"><label class="task-list-item-label" for="task-item-6413221"> é…ç½®æ–‡ä»¶</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-786155"><label class="task-list-item-label" for="task-item-786155"> é€šçŸ¥åŠŸèƒ½</label></li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸€ä¸ªutoolsæ’ä»¶â€”â€”hasidsåŠ è§£å¯†]]></title>
        <id>/post/YMhNrwxuT/</id>
        <link href="/post/YMhNrwxuT/">
        </link>
        <updated>2021-03-22T12:07:53.000Z</updated>
        <summary type="html"><![CDATA[<p>å·¥ä½œä¸­ç”¨åˆ°äº†hashidsåŠ å¯†ç®—æ³•ï¼Œå¼€å‘æµ‹è¯•æ—¶ç»å¸¸éœ€è¦å¯¹æŸä¸ªIDæˆ–hashidè¿›è¡ŒåŠ å¯†ã€è§£å¯†ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œå‘¨æœ«èŠ±äº†ç‚¹æ—¶é—´åŸºäº<code>otp</code>å°è£…äº†ä¸€ä¸ªutoolsæ’ä»¶â€”â€”<code>hashids</code>ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>å·¥ä½œä¸­ç”¨åˆ°äº†hashidsåŠ å¯†ç®—æ³•ï¼Œå¼€å‘æµ‹è¯•æ—¶ç»å¸¸éœ€è¦å¯¹æŸä¸ªIDæˆ–hashidè¿›è¡ŒåŠ å¯†ã€è§£å¯†ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œå‘¨æœ«èŠ±äº†ç‚¹æ—¶é—´åŸºäº<code>otp</code>å°è£…äº†ä¸€ä¸ªutoolsæ’ä»¶â€”â€”<code>hashids</code>ã€‚</p>
<!-- more -->
<p>utoolsæ˜¯ä»€ä¹ˆå°±ä¸å¤šè¯´äº†ï¼Œè¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹<code>hashids</code>æ’ä»¶çš„ä½¿ç”¨ã€‚</p>
<blockquote>
<p>GitHubåœ°å€: <a href="https://github.com/anhoder/utools-hashids">https://github.com/anhoder/utools-hashids</a></p>
</blockquote>
<h2 id="æ·»åŠ hashidsé…ç½®">æ·»åŠ hashidsé…ç½®</h2>
<p>hashidsåŠ è§£å¯†éœ€è¦é…ç½®saltåŠæœ€å°é•¿åº¦ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å…³é”®å­—è¿›å»æ·»åŠ é…ç½®çš„æ­¥éª¤:</p>
<ul>
<li>hadd</li>
<li>hash-add</li>
<li>hashæ·»åŠ é…ç½®</li>
</ul>
<figure data-type="image" tabindex="1"><img src="/post-images/1617624599510.png" alt="æ·»åŠ é…ç½®" loading="lazy"></figure>
<p>è¿›å…¥ä¹‹åï¼Œä¾æ¬¡è¾“å…¥<code>åç§°</code>-<code>salt</code>-<code>æœ€å°é•¿åº¦</code>å³å¯ä¿å­˜é…ç½®ã€‚</p>
<blockquote>
<p>å¦‚æœæœ‰å¤šä¸ªç¯å¢ƒé…ç½®ï¼Œå¤šæ¬¡æ·»åŠ å³å¯ï¼Œ<strong>åç§°ä¸å¯é‡å¤</strong>ã€‚</p>
</blockquote>
<h2 id="hashidsåŠ å¯†">hashidsåŠ å¯†</h2>
<p>hashidsåŠ å¯†æœ‰ä¸¤ç§æ–¹å¼è¿›å…¥ï¼Œä¸€ç§æ˜¯ä½¿ç”¨å…³é”®å­—ï¼š</p>
<ul>
<li>haen</li>
<li>hash-encode</li>
<li>hashç¼–ç </li>
</ul>
<p>è¿›å…¥ä¹‹åï¼Œè¾“å…¥ä½ æƒ³è¦åŠ å¯†çš„IDï¼Œåˆ—è¡¨ä¸­ä¼šæ˜¾ç¤ºä½ å·²æœ‰é…ç½®çš„åŠ å¯†ç»“æœï¼Œå›è½¦å³å¯å¤åˆ¶ï¼Œå¦‚ï¼š</p>
<figure data-type="image" tabindex="2"><img src="/post-images/1617626324547.png" alt="hashidsåŠ å¯†" loading="lazy"></figure>
<p>å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯ç›´æ¥åœ¨<code>utools</code>çš„ä¸»è¾“å…¥æ¡†å†…è¾“å…¥éœ€è¦åŠ å¯†çš„IDï¼Œé€‰æ‹©<code>hashç¼–ç </code>è¿›å…¥ï¼Œå›è½¦å³å¯å¤åˆ¶ã€‚</p>
<blockquote>
<ol>
<li>å¦‚æœä½ å¼€å¯äº†utoolsçš„å³é”®è¶…çº§é¢æ¿ï¼Œå°±æ›´æ–¹ä¾¿äº†ï¼Œåªéœ€è¦é•¿æŒ‰å³é”®ä½ çš„IDï¼Œé€‰æ‹©<code>hashç¼–ç </code>å³å¯ã€‚</li>
<li>å¦‚æœä½ éœ€è¦åˆ é™¤é…ç½®ï¼Œåœ¨è¿›å…¥ä¹‹åä½¿ç”¨<code>control</code>+<code>enter</code>æˆ–<code>command</code>+<code>enter</code>å³å¯åˆ é™¤é€‰ä¸­çš„é…ç½®é¡¹ã€‚</li>
</ol>
</blockquote>
<h2 id="hashidsè§£å¯†">hashidsè§£å¯†</h2>
<p>è§£å¯†å’ŒåŠ å¯†å·®ä¸å¤šï¼Œå°±ä¸èµ˜è¿°äº†ï¼Œå…³é”®å­—ï¼š</p>
<ul>
<li>hade</li>
<li>hash-decode</li>
<li>hashè§£ç </li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PHPä¸­ä¸€äº›å¥½ç”¨çš„æŠ€å·§]]></title>
        <id>/post/O933qcq8E/</id>
        <link href="/post/O933qcq8E/">
        </link>
        <updated>2021-02-28T12:06:47.000Z</updated>
        <summary type="html"><![CDATA[<p>è¿™é‡Œä¸»è¦ä»‹ç»ä¸€äº›æˆ‘çŸ¥é“çš„PHPçš„ä½¿ç”¨æŠ€å·§ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>è¿™é‡Œä¸»è¦ä»‹ç»ä¸€äº›æˆ‘çŸ¥é“çš„PHPçš„ä½¿ç”¨æŠ€å·§ã€‚</p>
<!-- more -->
<h2 id="1-phpå†…ç½®çš„web-server">1ã€PHPå†…ç½®çš„Web Server</h2>
<p>é¦–å…ˆï¼Œæœ‰ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>å¦‚æœä½ éœ€è¦å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªHTTPæœåŠ¡æ¥è°ƒè¯•PHPä»£ç ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
</blockquote>
<p><em>å¯åŠ¨php-fpmæˆ–php-cgiè¿›ç¨‹ç›‘å¬9000ç«¯å£ï¼Œç„¶åä½¿ç”¨Nginxå°†Httpè¯·æ±‚é€šè¿‡FastCGIæ¥å£è½¬å‘ç»™php-fpmæˆ–php-cgiè¿›ç¨‹ï¼Ÿ</em></p>
<p>è¿™ä¸å¤±ä¸ºä¸€ç§æ–¹æ³•ï¼Œä½†æ˜¯å¹¶ä¸ç®—æ–¹ä¾¿ã€‚</p>
<p>å…¶å®ï¼ŒPHP 5.4.0åå°±æä¾›äº†ä¸€ä¸ªå†…ç½®çš„WebæœåŠ¡å™¨ï¼Œä½ å¯ä»¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤æ¥å¯åŠ¨å®ƒ:</p>
<pre><code class="language-sh">php -S 127.0.0.1:8080 a.php
</code></pre>
<p>ç„¶åå°±é€šè¿‡ http://127.0.0.1:8080 æ¥è¿›è¡Œè®¿é—®äº†ã€‚</p>
<h2 id="2-æ‰§è¡Œphpä»£ç æ—¶ç”Ÿæˆdebugä¿¡æ¯">2ã€æ‰§è¡ŒPHPä»£ç æ—¶ç”Ÿæˆdebugä¿¡æ¯</h2>
<blockquote>
<p>åœ¨æ‰§è¡ŒPHPä»£ç æ—¶ï¼Œä½ ä¼šç”¨ä»€ä¹ˆæ–¹æ³•è¿›è¡Œè°ƒè¯•ï¼Ÿ</p>
</blockquote>
<p><em>var_dumpã€print_rç›´æ¥è¾“å‡ºï¼Ÿ</em></p>
<p>é™¤äº†ç›´æ¥è¾“å‡ºï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨debugæ¨¡å¼é…åˆIDEæ¥è¿›è¡Œè°ƒè¯•ã€‚åœ¨æ‰§è¡ŒPHPä»£ç æ—¶ï¼ŒåŠ ä¸Š<code>-e</code>å‚æ•°ï¼ŒåŒæ—¶IDEå¼€å¯debugç›‘å¬ï¼ˆéœ€è¦å®‰è£…xdebugæˆ–yasdç­‰è°ƒè¯•ç±»æ‰©å±•ï¼Œæ¨èyasdï¼Œå®ƒå¯ä»¥è°ƒè¯•swooleåç¨‹ï¼‰:</p>
<pre><code class="language-sh">php -e a.php

php -e artisan test:test
</code></pre>
<p>è¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨IDEçš„debugåŠŸèƒ½æ¥è°ƒè¯•ä½ çš„PHPå‘½ä»¤äº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é…åˆPHPçš„å†…ç½®WebæœåŠ¡å™¨ä¸€èµ·ä½¿ç”¨ï¼š</p>
<pre><code class="language-sh">php -e -S 127.0.0.1:8080 a.php
</code></pre>
<h2 id="3-æ•°ç»„è¿­ä»£">3ã€æ•°ç»„è¿­ä»£</h2>
<blockquote>
<p>éœ€è¦è·å–è¿™ä¸ªæ•°ç»„æ‰€æœ‰å±‚çº§çš„å­å…ƒç´ ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<pre><code class="language-php">$arr = [
  'key1' =&gt; 'value1',
  'key2' =&gt; [
      'key3' =&gt; 'value2',
      'key4' =&gt; [
          'value3',
          'value4',
      ]
  ],
  'key5' =&gt; 'value5'
];
</code></pre>
</blockquote>
<p><em>ä½¿ç”¨é€’å½’ï¼Ÿ</em></p>
<p>æ²¡é”™ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å¦å¤–ä¸€ç§æ–¹å¼ï¼š</p>
<pre><code class="language-php">$arr = [
    'key1' =&gt; 'value1',
    'key2' =&gt; [
        'key3' =&gt; 'value2',
        'key4' =&gt; [
            'value3',
            'value4',
        ]
    ],
    'key5' =&gt; 'value5'
];

$it = new RecursiveArrayIterator($arr);
$recursiveIt = new RecursiveIteratorIterator($it);
foreach ($recursiveIt as $v) {
    var_dump($v);
}
</code></pre>
<h2 id="4-ç›®å½•è¿­ä»£">4ã€ç›®å½•è¿­ä»£</h2>
<blockquote>
<p>éœ€è¦è·å–ä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰å±‚çº§çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
</blockquote>
<p><em>è¿™æ ·ä½¿ç”¨dirè¿­ä»£ï¼Ÿ</em></p>
<pre><code class="language-php">function test($dir) {
    $dirHandle = dir($dir);
    while ($item = $dirHandle-&gt;read()) {
        if ($item == '.' || $item == '..') continue;
        $path = &quot;{$dir}/{$item}&quot;;
        if (is_dir($path)) {
            test($path);
        } else {
            var_dump($item);
        }
    }
}
</code></pre>
<p>ä½ è¿˜å¯ä»¥ç”¨æ›´ç®€å•çš„æ–¹æ³•ï¼ŒåŒæ ·ä¹Ÿæ˜¯PHPå†…ç½®çš„è¿­ä»£å™¨:</p>
<pre><code class="language-php">$it = new RecursiveDirectoryIterator('./');
$reIt = new RecursiveIteratorIterator($it);

foreach ($reIt as $value) {
    var_dump($value);
}
</code></pre>
<h2 id="5-è®¿é—®å¯¹è±¡çš„ç§æœ‰å±æ€§">5ã€è®¿é—®å¯¹è±¡çš„ç§æœ‰å±æ€§</h2>
<blockquote>
<p>åœ¨ä½¿ç”¨ä¸€ä¸ªåº“çš„å¯¹è±¡æ—¶ï¼Œæƒ³è¦è®¿é—®è¯¥å¯¹è±¡çš„ç§æœ‰å±æ€§ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
</blockquote>
<p><em>?</em></p>
<p>å¯ä»¥ä½¿ç”¨<code>Closure</code>ç±»çš„é™æ€æ–¹æ³•<code>bind</code>æˆ–éé™æ€æ–¹æ³•<code>bindTo</code>å°†å‡½æ•°ç»‘å®šåˆ°è¯¥ç±»çš„ä½œç”¨åŸŸä¸‹ï¼š</p>
<pre><code class="language-php">class A {
    private $name = 'The name of A';
}

$a = new A();

// æ–¹æ³•ä¸€
$closure = Closure::bind(function () use ($a) {
    var_dump($a-&gt;name);
}, null, A::class);

// æ–¹æ³•äºŒï¼Œé€šè¿‡thisè®¿é—®
//$closure = Closure::bind(function () {
//    var_dump($this-&gt;name);
//}, $a, A::class);

$closure();
</code></pre>
<h2 id="6-fastcgi_request_finish">6ã€fastcgi_request_finish</h2>
<p>fastcgi_request_finishå‡½æ•°æ˜¯PHPæä¾›çš„åœ¨CGIæ¨¡å¼ä¸‹å¯ç”¨çš„æ–¹æ³•ã€‚</p>
<p>è°ƒç”¨æ­¤æ–¹æ³•ä¼šå°†å“åº”æ•°æ®ç«‹å³å‘é€ç»™ç”¨æˆ·ï¼Œä½†ä¸ä¸­æ–­åç»­ä»£ç æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-php">echo 123;
echo 456;

fastcgi_finish_request(); // æ­¤æ—¶å°†å“åº”å‘é€ç»™ç”¨æˆ·

echo 789;

file_put_contents('a.txt', '789');
</code></pre>
<p>ä»¥ä¸Šä»£ç åœ¨CGIæ¨¡å¼ä¸‹æ‰§è¡Œï¼Œä½ ä¼šå¾—åˆ°123456çš„å“åº”æ•°æ®ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆa.txtæ–‡ä»¶ï¼Œå†…å®¹ä¸º789ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç”¨é€”å°±æ˜¯è·³è¿‡ä¸å“åº”æ— å…³çš„æ•°æ®å¤„ç†ï¼Œæå‰è¿”å›æ•°æ®ç»™å®¢æˆ·ç«¯ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</p>
<blockquote>
<p>ä»…åœ¨CGIæ¨¡å¼ä¸‹å¯ç”¨ï¼Œå…¶ä»–æ¨¡å¼ä¸‹ä¼šæŠ¥æ–¹æ³•ä¸å­˜åœ¨çš„é”™è¯¯</p>
<p>Laravelä¸­Responseçš„sendæ–¹æ³•ä¹Ÿæ˜¯ç”¨åˆ°äº†è¿™ä¸ªå‡½æ•°</p>
</blockquote>
<h2 id="7-ç»­">7ã€ç»­...</h2>
<p><em>åç»­è¡¥å……...</em></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸­æ–‡æ‰‹å†™ä½“Excalidraw]]></title>
        <id>/post/8QqIK9WTM/</id>
        <link href="/post/8QqIK9WTM/">
        </link>
        <updated>2021-01-23T12:06:00.000Z</updated>
        <content type="html"><![CDATA[<!-- more -->
<h2 id="excalidraw">Excalidraw</h2>
<p>Excalidrawæ˜¯ä¸€ä¸ªå¼€æºçš„ã€ç”¨äºç»˜åˆ¶æ‰‹ç»˜é£æ ¼è‰å›¾çš„é¡¹ç›®ï¼ŒGitHubåœ°å€ä¸º<a href="https://github.com/excalidraw/excalidraw">https://github.com/excalidraw/excalidraw</a>ï¼Œç”¨å®ƒåˆ¶ä½œçš„è‰å›¾æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="/post-images/1617677708342.png" alt="è‰å›¾" loading="lazy"></figure>
<p>çœ‹èµ·æ¥è¿˜ä¸é”™ï¼Œä½†æ˜¯ç”±äºè¿™ä¸ªé¡¹ç›®è¯ç”Ÿäºå›½å¤–ï¼Œæ‰€ä»¥å¹¶ä¸æ”¯æŒä¸­æ–‡å­—ä½“ï¼š</p>
<figure data-type="image" tabindex="2"><img src="/post-images/1617677730364.png" alt="è‰å›¾2" loading="lazy"></figure>
<p>å‡ ä¸ªæ±‰å­—å¯ä»¥è¯´æ˜¯æ ¼æ ¼ä¸å…¥äº†ğŸ˜‚ã€‚</p>
<h2 id="æ›¿æ¢å­—ä½“">æ›¿æ¢å­—ä½“</h2>
<p>äºæ˜¯ï¼Œæˆ‘æ‰¾äº†ä¸€äº›å…è´¹çš„æ‰‹å†™å­—ä½“å°è¯•æ›¿æ¢è¿›å»ï¼Œæœ€åæ‰¾åˆ°ä¸€ä¸ªæ•ˆæœè¿˜ä¸é”™çš„â€”â€”æ²ç‘¶éšå¿ƒæ‰‹å†™ä½“ã€‚</p>
<figure data-type="image" tabindex="3"><img src="/post-images/1617677746929.png" alt="è‰å›¾3" loading="lazy"></figure>
<p>æ²ç‘¶éšå¿ƒæ‰‹å†™ä½“æ˜¯å®Œå…¨å…è´¹ï¼Œå³ä½¿æ˜¯å•†ç”¨ã€‚</p>
<blockquote>
<p>æ²ç‘¶æ˜¯ä½œè€…å¥³å„¿çš„åå­— WoW<br>
å­—ä½“ä¸‹è½½åœ°å€: <a href="https://www.zcool.com.cn/work/ZMjg5MjAwMDQ=.html">https://www.zcool.com.cn/work/ZMjg5MjAwMDQ=.html</a></p>
</blockquote>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>å¦‚æœä½ æƒ³è¦ä½¿ç”¨çš„è¯ï¼Œå¯ä»¥è®¿é—®: <a href="https://danlanhai.gitee.io/excalidraw/">https://danlanhai.gitee.io/excalidraw/</a>æˆ–<a href="https://anhoder.github.io/excalidraw/">https://anhoder.github.io/excalidraw/</a>ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è‡ªå·±å†™ä¸ªåŒ…â€”â€”PHP8 Attributeæ”¶é›†å™¨]]></title>
        <id>/post/dm-3SDHLz/</id>
        <link href="/post/dm-3SDHLz/">
        </link>
        <updated>2021-01-17T12:05:04.000Z</updated>
        <summary type="html"><![CDATA[<p>PHP8å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ–°å¢äº†ä¸å°‘ç‰¹æ€§ï¼Œå…¶ä¸­æˆ‘è§‰å¾—æ¯”è¾ƒå¥½ç”¨çš„ï¼šä¸€ä¸ªæ˜¯å‡½æ•°å¯ä»¥æŒ‡å®šå‚æ•°åä¼ å‚ï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯<strong>æ³¨è§£Attribute</strong>ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>PHP8å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ–°å¢äº†ä¸å°‘ç‰¹æ€§ï¼Œå…¶ä¸­æˆ‘è§‰å¾—æ¯”è¾ƒå¥½ç”¨çš„ï¼šä¸€ä¸ªæ˜¯å‡½æ•°å¯ä»¥æŒ‡å®šå‚æ•°åä¼ å‚ï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯<strong>æ³¨è§£Attribute</strong>ã€‚</p>
<!-- more -->
<h2 id="æ³¨è§£">æ³¨è§£</h2>
<p>åœ¨PHP8ä¹‹å‰ï¼ŒPHPè¯­æ³•ä¸Šæ˜¯ä¸æ”¯æŒæ³¨è§£çš„ï¼Œåªèƒ½é€šè¿‡åå°„æ¥è·å–ç±»ã€æ–¹æ³•æˆ–å±æ€§çš„æ³¨é‡Šï¼Œç„¶åé€šè¿‡è§£ææ³¨é‡Šæ¥è·å–éœ€è¦çš„å…ƒæ•°æ®ã€‚æœ€å…·ä»£è¡¨æ€§çš„å°±æ˜¯æ³¨è§£åŒ…<a href="https://github.com/doctrine/annotations">doctrine/annotations</a>ï¼Œå¾ˆå¤šæ¡†æ¶éƒ½æœ‰åœ¨ç”¨ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ï¼š</p>
<pre><code class="language-php">use Doctrine\Common\Annotations\Annotation\Attribute;
use Doctrine\Common\Annotations\Annotation\Attributes;
use Doctrine\Common\Annotations\Annotation\Target;

/**
 * @Annotation
 * @Target(&quot;CLASS&quot;)
 * @Attributes({
 *     @Attribute(&quot;name&quot;, type=&quot;string&quot;, required=true),
 *     @Attribute(&quot;age&quot;, type=&quot;int&quot;)
 * })
 */
class Student
{
    /**
     * @var string
     */
    private $name;
    
    /**
     * @var int
     */
    private $age
}

/**
 * @Student(name=&quot;anhoder&quot;, age=18)
 */
class Anhoder
{
    
}
</code></pre>
<p>è€Œåœ¨PHP8ä¸­ï¼Œæ³¨è§£Attributeæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="language-php">#[Attribute(Attribute::TARGET_CLASS)]
class Student
{
    public function __construct(private string $name, private int $age)
    {
    }
}

#[Student('anhoder', 18)]
class Anhoder
{

}
</code></pre>
<h2 id="æ”¶é›†æ³¨è§£attribute">æ”¶é›†æ³¨è§£Attribute</h2>
<p>PHP8çš„Attributeæ•°æ®ä¹Ÿéœ€è¦é€šè¿‡åå°„æ¥æ‰‹åŠ¨è·å–ï¼š</p>
<pre><code class="language-php">$reflection = new ReflectionClass(Anhoder::class);
var_dump($reflection-&gt;getAttributes());
// array(1) {
//   [0]=&gt;
//   object(ReflectionAttribute)#3 (0) {
//   }
// }
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªAttributeæ”¶é›†å™¨ï¼Œç”¨äºè‡ªåŠ¨æ”¶é›†é¡¹ç›®ä¸­æˆ–å…¶ä»–composeråŒ…ä¸­çš„æ³¨è§£ä¿¡æ¯ã€‚</p>
<h3 id="1-è·å–æ‰€æœ‰åŒ…çš„æ ¹ç›®å½•åŠnamespace">1. è·å–æ‰€æœ‰åŒ…çš„æ ¹ç›®å½•åŠnamespace</h3>
<p>é€šè¿‡composeræä¾›çš„ClassLoaderè‡ªåŠ¨åŠ è½½ç±»ï¼Œæˆ‘ä»¬è·å–åˆ°æ‰€æœ‰åŒ…çš„å‘½åç©ºé—´åŠå¯¹åº”çš„æ ¹ç›®å½•ï¼š</p>
<pre><code class="language-php">// è·å–Composerçš„è‡ªåŠ¨åŠ è½½ç±»
function getComposerLoader()
{
    $loaders = spl_autoload_functions();

    foreach ($loaders as $loader) {
        if (is_array($loader) &amp;&amp; isset($loader[0]) &amp;&amp; $loader[0] instanceof ClassLoader) {
            return $loader[0];
        }
    }
    
    throw new NotFoundException('Composer class loader');
}

$composerLoader = getComposerLoader();

// è·å–å‘½ä»¤ç©ºé—´åŠç›®å½•
$composerLoader-&gt;getPrefixesPsr4();
</code></pre>
<h3 id="2-åŠ è½½æ¯ä¸ªåŒ…ä¸‹çš„annotationconfigç±»">2. åŠ è½½æ¯ä¸ªåŒ…ä¸‹çš„AnnotationConfigç±»</h3>
<p>æˆ‘ä»¬çº¦å®šï¼šåœ¨æ¯ä¸ªéœ€è¦æ”¶é›†æ³¨è§£çš„åŒ…ä¸‹ï¼Œéƒ½æ”¾ä¸€ä¸ªAnnotationConfigç±»ï¼Œå¹¶å®ç°AnnotationConfigInterfaceæ¥å£ã€‚ç”¨äºè·å–è¯¥åŒ…ä¸‹éœ€è¦æ‰«æçš„ç›®å½•åŠå‘½åç©ºé—´ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-php">class AnnotationConfig implements AnnotationConfigInterface
{

    /**
     * @inheritDoc
     */
    public static function getAnnotationConfigs(): array
    {

        return [
            'scanDirs' =&gt; [
                __NAMESPACE__ =&gt; __DIR__,
            ],
        ];
    }
}
</code></pre>
<p>åœ¨ä»¥ä¸Šçº¦å®šæ¡ä»¶ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦éå†ç¬¬ä¸€æ­¥è·å–åˆ°çš„æ ¹ç›®å½•ï¼Œåˆ¤æ–­å…¶ç›®å½•ä¸‹æ˜¯å¦æœ‰AnnotationConfigç±»ï¼Œè‹¥æœ‰åˆ™è°ƒç”¨getAnnotationConfigsæ–¹æ³•è·å–å…¶é…ç½®ã€‚</p>
<h3 id="3-è§£æ-æ”¶é›†æ³¨è§£">3. è§£æã€æ”¶é›†æ³¨è§£</h3>
<p>æœ€åä¸€æ­¥ï¼Œå°±æ˜¯éå†æ¯ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åŠå…¶å¯¹åº”çš„ç±»ï¼Œç„¶åé€šè¿‡åå°„è·å–åˆ°ç±»ã€æ–¹æ³•ã€å±æ€§åŠå¸¸é‡çš„æ³¨è§£ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯å­˜å…¥å®¹å™¨æ•°ç»„ä¸­ã€‚</p>
<pre><code class="language-php">$namespace = rtrim($namespace, '\\');
$iterator = new RecursiveDirectoryIterator($dir);

foreach ($iterator as $splFileInfo) {
    $basename = $splFileInfo-&gt;getBasename();
    
    if (!$splFileInfo-&gt;isFile() || $splFileInfo-&gt;getExtension() != 'php') {
        // not php file
        continue;
    }

    // PHP File
    $className = $splFileInfo-&gt;getBasename('.' . $splFileInfo-&gt;getExtension());
    $class = &quot;{$namespace}\\{$className}&quot;;
    if (class_exists($class)) {
        $reflection = new ReflectionClass($class);
        $attributes = $reflection-&gt;getAttributes();
    }
}
</code></pre>
<h2 id="å°è£…ä¸ºcomposeråŒ…">å°è£…ä¸ºcomposeråŒ…</h2>
<p>ä»¥ä¸Šä»£ç éƒ½æ˜¯ç®€å•çš„ç¤ºä¾‹ï¼Œå®é™…è¿˜éœ€è¦è€ƒè™‘æ›´å¤šï¼Œæ‰€ä»¥æˆ‘å°†å…¶åšæˆäº†ä¸€ä¸ªcomposeråŒ…â€”â€”<a href="https://github.com/anhoder/annotations-collector">anhoder/annotations-collector</a>ã€‚ç®€å•çš„ä½¿ç”¨ï¼š</p>
<ol>
<li>
<p>å®‰è£…</p>
<pre><code class="language-sh">composer require anhoder/annotations-collector
</code></pre>
</li>
<li>
<p>åˆ›å»º <code>AnnotationConfig.php</code> æ–‡ä»¶åˆ°ä½ é¡¹ç›®çš„æ ¹ç›®å½•</p>
<pre><code class="language-php">class AnnotationConfig implements AnnotationConfigInterface
{

    public static function getAnnotationConfigs(): array
    {
        return [
            // The dirs need to be scanned
            'scanDirs' =&gt; [
                __NAMESPACE__ =&gt; __DIR__,
            ],
        ];
    }
}
</code></pre>
</li>
<li>
<p>æ·»åŠ AnnotationåŠAnnotationHandler.</p>
<pre><code class="language-php">// Annotation
#[Attribute(Attribute::TARGET_CLASS)]
class ClassAnnotation
{
    public const TEST = 'test';

    private string $test;

    public function __construct(string $test)
    {
        $this-&gt;test = $test;
    }
}

// AnnotationHandler
#[AnnotationHandler(ClassAnnotation::class)]
class ClassAnnotationHandler extends AbstractAnnotationHandler
{
    public function handle()
    {
        // Your logic.
        var_dump($this);
    }
}
</code></pre>
</li>
<li>
<p>å¼€å§‹æ‰«æ</p>
<pre><code class="language-php">AnnotationHelper::scan();
</code></pre>
</li>
</ol>
<h2 id="é™„">é™„</h2>
<p>ç”±äºæ³¨è§£éœ€è¦é…åˆåå°„æ¥ä½¿ç”¨ï¼Œå…¶ç›¸æ¯”æ­£å¸¸ä»£ç æ€§èƒ½è¾ƒå·®ï¼Œè€Œä¸”åœ¨php-fpmæ¨¡å¼ä¸‹ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦é‡æ–°è·å–æ³¨è§£ä¿¡æ¯ï¼Œæ‰€ä»¥<strong>ä¸æ¨èåœ¨php-fpmä¸‹ä½¿ç”¨æ³¨è§£</strong>ï¼Œå…¶<strong>æ›´é€‚åˆä¸€äº›å¸¸é©»å†…å­˜å‹çš„é¡¹ç›®</strong>ï¼Œä¾‹å¦‚ï¼šSwooleã€WorkerManç­‰ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Swoftå†…å­˜æ³„æ¼æ’æŸ¥]]></title>
        <id>/post/e-qWPg1ij/</id>
        <link href="/post/e-qWPg1ij/">
        </link>
        <updated>2021-01-16T12:04:00.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ€è¿‘åœ¨å…¬å¸ä½¿ç”¨swoftå†™äº†ä¸€ä¸ªå®šæ—¶çˆ¬å–æ•°æ®çš„é¡¹ç›®ï¼Œä¸Šçº¿åè·Ÿè¸ªçº¿ä¸Šæ—¥å¿—å‘ç°swoftçš„workerè¿›ç¨‹ä¼š<strong>å‡ºç°å‘¨æœŸæ€§çš„å†…å­˜æº¢å‡º</strong>ï¼š</p>
<pre><code class="language-txt">Fatal error: Uncaught ErrorException: Allowed memory size of 268435456 bytes exhausted (tried to allocate 262144 bytes)
</code></pre>
]]></summary>
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å…¬å¸ä½¿ç”¨swoftå†™äº†ä¸€ä¸ªå®šæ—¶çˆ¬å–æ•°æ®çš„é¡¹ç›®ï¼Œä¸Šçº¿åè·Ÿè¸ªçº¿ä¸Šæ—¥å¿—å‘ç°swoftçš„workerè¿›ç¨‹ä¼š<strong>å‡ºç°å‘¨æœŸæ€§çš„å†…å­˜æº¢å‡º</strong>ï¼š</p>
<pre><code class="language-txt">Fatal error: Uncaught ErrorException: Allowed memory size of 268435456 bytes exhausted (tried to allocate 262144 bytes)
</code></pre>
<!-- more -->
<h2 id="ä¸€-åˆ†æ">ä¸€ã€åˆ†æ</h2>
<p>è§‚å¯Ÿåˆ°çº¿ä¸Šworkerè¿›ç¨‹çš„å†…å­˜å ç”¨æ˜¯éšæ—¶é—´å¢é•¿è€Œé€æ¸ä¸Šå‡çš„ï¼Œæ‰€ä»¥æ’é™¤å•æ¬¡æ‰§è¡Œå¯¼è‡´å†…å­˜æº¢å‡ºçš„æƒ…å†µï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯é¡¹ç›®ä¸­çš„æŸå¤„ä»£ç <strong>å­˜åœ¨å†…å­˜æ³„æ¼</strong>ã€‚</p>
<p>å› æ­¤ï¼Œè§£å†³é—®é¢˜çš„å…³é”®å°±åœ¨äº<strong>å¦‚ä½•å®šä½åˆ°é¡¹ç›®ä¸­äº§ç”Ÿå†…å­˜æ³„æ¼çš„ä½ç½®</strong>ã€‚</p>
<h2 id="äºŒ-å®šä½å†…å­˜æ³„æ¼">äºŒã€å®šä½å†…å­˜æ³„æ¼</h2>
<h3 id="1-swoole-tracker">1ã€Swoole Tracker</h3>
<p><a href="https://business.swoole.com/tracker/index">Swoole Tracker</a>æ˜¯Swooleå®˜æ–¹æä¾›çš„åˆ†æå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ£€æµ‹é¡¹ç›®ä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼ˆ<a href="https://mp.weixin.qq.com/s/oAyToE4aNyU3-_PQ5ii3aw">ä½¿ç”¨æ–¹æ³•</a>ï¼‰ã€‚</p>
<h4 id="å®‰è£…">å®‰è£…</h4>
<p>Swoole Trackerçš„å®‰è£…æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªphpçš„æ‰©å±•ï¼Œè€Œä¸”æ˜¯å·²ç»ç¼–è¯‘å¥½çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç¼–è¯‘å¥½çš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶(.so)æ”¾åˆ°phpçš„æ‰©å±•ç›®å½•ä¸‹ï¼Œç„¶ååœ¨php.iniä¸­åŠ ä¸Šé…ç½®å³å¯ã€‚</p>
<h4 id="ä½¿ç”¨">ä½¿ç”¨</h4>
<p>å®‰è£…å®ŒSwoole Trackeræ‰©å±•åï¼Œåœ¨ç›¸åº”çš„ä»£ç ä¸­åŠ å…¥Swoole Trackeræä¾›çš„Hookå‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-php">public function onPipeMessage(Server $server, int $srcWorkerId, $message): void
{
    trackerHookMalloc();
    // ...
}
</code></pre>
<p>æ¥ç€å¯åŠ¨æœåŠ¡ï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œåœ¨dockerå®¹å™¨å†…æ‰§è¡Œ<code>php -r &quot;trackerAnalyzeLeak();&quot;</code>å³å¯è·å–åˆ°æœåŠ¡è¿è¡Œæ—¶çš„å†…å­˜ç”³è¯·ä¿¡æ¯ã€å†…å­˜é‡Šæ”¾ä¿¡æ¯ä»¥åŠå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼çš„ä½ç½®ã€‚</p>
<h4 id="æ£€æµ‹ç»“æœ">æ£€æµ‹ç»“æœ</h4>
<p><a href="/post-images/memory_leak.txt">memory_leak.txt</a></p>
<blockquote>
<p>æ–‡ä»¶ä¸­å«å‘½ä»¤è¡Œé¢œè‰²ä»£ç ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨<code>cat memory_leak.txt</code>æŸ¥çœ‹</p>
</blockquote>
<p>ä»¥ä¸‹æ˜¯æ£€æµ‹ç»“æœä¸­å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼çš„ä»£ç ä½ç½®ï¼š</p>
<pre><code class="language-txt"> The Possible Leak As Malloc Size Keep Growth:
 /var/www/swoft_marketing_engine/vendor/swoft/server/src/Server.php:544 =&gt;  Growth Times : [29];  Growth Size : [181440]
 /var/www/swoft_marketing_engine/vendor/swoft/stdlib/src/Helper/ArrayHelper.php:959 =&gt;  Growth Times : [8];  Growth Size : [2784]
 /var/www/swoft_marketing_engine/vendor/swoft/stdlib/src/Helper/ArrayHelper.php:997 =&gt;  Growth Times : [12];  Growth Size : [17920]
 /var/www/swoft_marketing_engine/vendor/swoft/bean/src/Container.php:413 =&gt;  Growth Times : [24];  Growth Size : [10752]
 /var/www/swoft_marketing_engine/vendor/swoft/db/src/Database.php:252 =&gt;  Growth Times : [24];  Growth Size : [1536]
 /var/www/swoft_marketing_engine/vendor/swoft/db/src/Connection/Connection.php:370 =&gt;  Growth Times : [24];  Growth Size : [4608]
</code></pre>
<p>æ ¹æ®ç»“æœï¼Œ<strong>å‘ç°æ˜¯Swoftæ¡†æ¶æœ¬èº«æŸä¸ªä½ç½®å­˜åœ¨å†…å­˜æ³„æ¼</strong>ã€‚</p>
<p>ä½†æ˜¯ï¼Œæ£€æµ‹ç»“æœä¸­åªæœ‰äº§ç”Ÿå†…å­˜ç”³è¯·æ—¶çš„ä»£ç ä½ç½®ï¼Œè¿˜ä¸èƒ½ç¡®å®šå…·ä½“æ˜¯ä»€ä¹ˆåœ°æ–¹æœªé‡Šæ”¾å†…å­˜ã€‚</p>
<p>å› æ­¤ï¼Œåªèƒ½æ¢ä¸€ç§æ€è·¯ã€‚</p>
<h3 id="2-valgrind">2ã€Valgrind</h3>
<p>å°è¯•å¦å¤–ä¸€æ¬¾å†…å­˜æ³„æ¼åˆ†æç¥å™¨â€”â€”valgrindã€‚</p>
<p>ä½¿ç”¨åå‘ç°åˆ†ææŠ¥å‘Šä¸­åªä¼šå‡ºç°ç›¸å…³çš„C/C++ä»£ç ï¼Œæ— æ³•å®šä½åˆ°å…·ä½“çš„PHPä»£ç ä½ç½®ï¼Œæ”¾å¼ƒã€‚</p>
<h3 id="3-memory_get_usage">3ã€memory_get_usage()</h3>
<p>ä½¿ç”¨å‡ ç§å†…å­˜æ³„æ¼åˆ†æå·¥å…·éƒ½æ— æœåï¼Œå°è¯•ä½¿ç”¨æœ€åŸå§‹çš„æ–¹å¼â€”â€”PHPçš„å†…ç½®å‡½æ•°<code>memory_get_usage()</code>ã€‚</p>
<p>å¤§è‡´æ€è·¯å°±æ˜¯åœ¨éœ€è¦è°ƒç”¨çš„å‡½æ•°ä¸Šä¸‹ï¼ŒåŠ ä¸Š<code>memory_get_usage()</code>å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-php">var_dump(memory_get_usage());
test();
var_dump(memory_get_usage());
</code></pre>
<p>å› ä¸ºï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨å‡½æ•°è°ƒç”¨å®Œæˆåï¼ŒZendå¼•æ“ä¼šå°†å¯¹åº”çš„å‡½æ•°æ ˆé”€æ¯ï¼Œç›¸åº”çš„å†…å­˜ä¼šè¢«é‡Šæ”¾ã€‚</p>
<blockquote>
<p>åœ¨ä½¿ç”¨æ—¶ï¼Œæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<ol>
<li><code>memory_get_usage()</code>æ”¯æŒä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å‚æ•°<code>real_usage</code>ï¼Œè¡¨ç¤ºæ˜¯å¦è·å–çœŸå®å†…å­˜å¤§å°ï¼Œå…¶ä¸­åŒ…æ‹¬æœªè¢«ä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚å› ä¸ºPHPå¼•æ“åœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œä¼šä¸€æ¬¡ç”³è¯·ä¸€å¤§å—å†…å­˜ï¼Œç”¨äºåç»­ä½¿ç”¨ï¼Œä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™é‡Œ<strong>ä¸è¦å°†å®ƒè®¾ç½®ä¸ºtrue</strong>ã€‚</li>
<li>å¦‚æœå‡½æ•°ä¸­å­˜åœ¨å¾ªç¯å¼•ç”¨ï¼ˆå¦‚ï¼šSwoftä¸­ORMçš„joinæ–¹æ³•ï¼‰ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œå˜é‡å¹¶ä¸ä¼šè¢«åŠæ—¶é‡Šæ”¾ï¼Œè¾“å‡ºå†…å­˜å ç”¨ä¼šå¢åŠ ï¼Œä½†æ˜¯è¿™æ˜¯æ­£å¸¸çš„ã€‚å› ä¸ºå½“å¾…é‡Šæ”¾å˜é‡è¾¾åˆ°ä¸€å®šæ•°é‡æˆ–å†…å­˜è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼ŒPHPçš„GCæ‰ä¼šç»Ÿä¸€é‡Šæ”¾æ‰è¿™äº›çš„å†…å­˜ã€‚</li>
</ol>
</blockquote>
<h4 id="æ£€æŸ¥ç»“æœ">æ£€æŸ¥ç»“æœ</h4>
<p>è¿™ç§æ–¹æ³•è™½ç„¶è´¹æ—¶è´¹åŠ›ï¼Œä½†æ•ˆæœè¿˜ç®—ä¸é”™ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´æ’æŸ¥ï¼ŒæˆåŠŸå®šä½åˆ°äº†ä¸¤å¤„å†…å­˜æ³„æ¼ï¼š</p>
<ul>
<li>åœ¨åç¨‹ä¸­ä½¿ç”¨Redisæ—¶ï¼ŒSwoftæœªåœ¨åç¨‹ç»“æŸåé‡Šæ”¾ç›¸åº”çš„Redisè¿æ¥ä¿¡æ¯ï¼›</li>
<li>Swoftåœ¨å¤„ç†pipeMessageäº‹ä»¶ç»“æŸåæœªè§¦å‘åç¨‹ç»“æŸäº‹ä»¶ï¼Œå¯¼è‡´åç¨‹æ•°æ®ï¼ˆMySQLã€Redisè¿æ¥ä¿¡æ¯ç­‰ï¼‰æœªè¢«é‡Šæ”¾ã€‚</li>
</ul>
<h2 id="ä¸‰-è§£å†³æ–¹æ¡ˆ">ä¸‰ã€è§£å†³æ–¹æ¡ˆ</h2>
<p>æ—¢ç„¶å·²ç»å®šä½åˆ°å†…å­˜æ³„æ¼çš„åŸå› äº†ï¼Œè§£å†³åŠæ³•å°±ä¸éš¾äº†ï¼š</p>
<ul>
<li>åç¨‹ç»“æŸåï¼Œæ‰‹åŠ¨unset Redisçš„è¿æ¥ä¿¡æ¯ï¼›</li>
<li>åœ¨pipeMessgaeäº‹ä»¶ç»“æŸåï¼Œæ‰‹åŠ¨è§¦å‘åç¨‹ç»“æŸäº‹ä»¶ï¼Œé”€æ¯å¯¹åº”åç¨‹äº§ç”Ÿçš„æ•°æ®ã€‚</li>
</ul>
<h2 id="å››-åç»­">å››ã€åç»­</h2>
<p>ç»è¿‡ä»¥ä¸Šå¤„ç†åï¼Œ<strong>æˆªè‡³ç›®å‰ï¼Œçº¿ä¸Šswofté¡¹ç›®çš„å†…å­˜å ç”¨ç¨³å®šåœ¨50Må·¦å³ï¼Œæœªå‡ºç°å†…å­˜æº¢å‡ºé”™è¯¯</strong>ã€‚</p>
<p>æ­¤å¤–ï¼Œé’ˆå¯¹è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨GitHubä¸Šå‘Swoftå›¢é˜Ÿæäº¤äº†ä¸¤ä¸ªç›¸åº”çš„issueåŠä¿®å¤PRï¼Œç›®å‰ä»£ç å·²è¢«åˆå¹¶åˆ°masterã€‚</p>
<figure data-type="image" tabindex="1"><img src="/post-images/1617677953995.jpg" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="/post-images/1617677966544.jpg" alt="" loading="lazy"></figure>
<h2 id="äº”-æ€»ç»“">äº”ã€æ€»ç»“</h2>
<p>å…¶å®ï¼Œå†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼çš„æƒ…å†µå¹¶ä¸å®¹æ˜“å‘ç”Ÿï¼ˆå•æ¬¡è¿è¡Œç›´æ¥çˆ†å†…å­˜çš„é™¤å¤–emmm...ï¼‰ï¼Œåªè¦ä½ ï¼š</p>
<ul>
<li>ä¸è½»æ˜“ä½¿ç”¨å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼›</li>
<li>å¦‚æœä¸å¯é¿å…çš„éœ€è¦ä½¿ç”¨åˆ°å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼Œä¸€å®šè¦åœ¨ç”¨å®Œåunsetæ‰ç›¸åº”çš„æ•°æ®ã€‚</li>
</ul>
<blockquote>
<p>å¦å¤–ï¼Œåœ¨æ’æŸ¥è¿‡ç¨‹ä¸­ï¼Œç”¨åˆ°çš„ä¸€ä¸ªæŒºå¥½ç”¨çš„æŸ¥çœ‹å†…å­˜å ç”¨çš„å·¥å…·â€”â€”smemï¼Œå¯ä»¥æŸ¥çœ‹ç¨‹åºçš„USSã€PSSã€RSSğŸ‘ã€‚</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PHPæ‰©å±•å¼€å‘ä¸­å¸¸ç”¨çš„å‡½æ•°]]></title>
        <id>/post/B6gBPbA-S/</id>
        <link href="/post/B6gBPbA-S/">
        </link>
        <updated>2020-12-13T12:03:08.000Z</updated>
        <content type="html"><![CDATA[<h2 id="phpå‡½æ•°ç›¸å…³">PHPå‡½æ•°ç›¸å…³</h2>
<pre><code class="language-c">
zend_parse_parameters()     // è§£æå‡½æ•°å‚æ•°
// ä¾‹å¦‚ï¼Œsè¡¨ç¤ºå­—ç¬¦ä¸², è§£æä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°åˆ°name, åŠå…¶é•¿åº¦åˆ°name_len: 
if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, &quot;s&quot;, &amp;name, &amp;name_len) == FAILURE) {
    RETURN_NULL();
}

/* è§£æå‚æ•°æ—¶çš„ç±»å‹ä»£ç  */
b: å¸ƒå°”ç±»å‹ï¼ˆå¯¹åº”cç±»å‹: zend_boolï¼‰
l: æ•´å‹ï¼ˆlongï¼‰
d: æµ®ç‚¹å‹ï¼ˆdoubleï¼‰
s: å­—ç¬¦ä¸²ï¼ˆchar*, intï¼‰
r: èµ„æºå‹ï¼ˆzval*ï¼‰
a: æ•°ç»„ï¼ˆzval*ï¼‰
o: å¯¹è±¡ï¼ˆzval*ï¼‰
z: zvalï¼ˆzval*ï¼‰
</code></pre>
<blockquote>
<p>é™„ï¼šPHP 7ä¸­ä½¿ç”¨FAST_ZPPæ–¹å¼è§£æå‡½æ•°å‚æ•°çš„å®ï¼š<br>
<img src="/post-images/1617678458821.jpg" alt="" loading="lazy"></p>
</blockquote>
<h2 id="æ•°ç»„æ“ä½œ">æ•°ç»„æ“ä½œ</h2>
<pre><code class="language-c">array_init(arr)                         // åˆå§‹åŒ–æ•°ç»„
add_next_index_null(zval*)              // å‘æ•°å­—ç´¢å¼•çš„æ•°ç»„å¢åŠ null
add_next_index_long(zval*, long)        // ...æ·»åŠ longç±»å‹
add_next_index_bool(zval*, 0|1)         // ...æ·»åŠ boolç±»å‹
add_next_index_double(zval*, double)  
add_next_index_string(zval*, char*, zend_bool)
add_next_index_zval(zval*, zval*)
// ...
</code></pre>
<p>æ›´å¤šæ“ä½œæ•°ç»„çš„å‡½æ•°: <a href="https://www.php.net/manual/en/internals2.variables.arrays.php">https://www.php.net/manual/en/internals2.variables.arrays.php</a></p>
<blockquote>
<p>æœªå®Œå¾…ç»­...</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PHPæ‰©å±•å¼€å‘ä¸­å¸¸ç”¨çš„å®å‡½æ•°]]></title>
        <id>/post/y_zVEbs0X/</id>
        <link href="/post/y_zVEbs0X/">
        </link>
        <updated>2020-12-13T12:02:21.000Z</updated>
        <content type="html"><![CDATA[<h2 id="zvalç±»å‹ç›¸å…³">zvalç±»å‹ç›¸å…³</h2>
<pre><code class="language-c">
Z_TYPE(zval)        // è·å–zvalçš„ç±»å‹
Z_TYPE_P(*zval)     // è·å–*zvalçš„ç±»å‹
Z_TYPE_PP(**zval)   // è·å–**zvalçš„ç±»å‹

/* zvalç±»å‹ç›¸å…³å¸¸é‡ */
IS_NULL         // null 
IS_BOOL         // å¸ƒå°”
IS_LONG         // æ•´å‹
IS_DOUBLE       // æµ®ç‚¹å‹
IS_STRING       // å­—ç¬¦ä¸²
IS_ARRAY        // æ•°ç»„
IS_OBJECT       // å¯¹è±¡
IS_RESOURCE     // èµ„æº

</code></pre>
<h2 id="zvalå€¼ç›¸å…³">zvalå€¼ç›¸å…³</h2>
<pre><code class="language-c">//æ“ä½œæ•´æ•°çš„
#define Z_LVAL(zval)			(zval).value.lval
#define Z_LVAL_P(zval_p)		Z_LVAL(*zval_p)
#define Z_LVAL_PP(zval_pp)		Z_LVAL(**zval_pp)

//æ“ä½œIS_BOOLå¸ƒå°”å‹çš„
#define Z_BVAL(zval)			((zend_bool)(zval).value.lval)
#define Z_BVAL_P(zval_p)		Z_BVAL(*zval_p)
#define Z_BVAL_PP(zval_pp)		Z_BVAL(**zval_pp)

//æ“ä½œæµ®ç‚¹æ•°çš„
#define Z_DVAL(zval)			(zval).value.dval
#define Z_DVAL_P(zval_p)		Z_DVAL(*zval_p)
#define Z_DVAL_PP(zval_pp)		Z_DVAL(**zval_pp)

//æ“ä½œå­—ç¬¦ä¸²çš„å€¼å’Œé•¿åº¦çš„
#define Z_STRVAL(zval)			(zval).value.str.val
#define Z_STRVAL_P(zval_p)		Z_STRVAL(*zval_p)
#define Z_STRVAL_PP(zval_pp)		Z_STRVAL(**zval_pp)

#define Z_STRLEN(zval)			(zval).value.str.len
#define Z_STRLEN_P(zval_p)		Z_STRLEN(*zval_p)
#define Z_STRLEN_PP(zval_pp)		Z_STRLEN(**zval_pp)

#define Z_ARRVAL(zval)			(zval).value.ht
#define Z_ARRVAL_P(zval_p)		Z_ARRVAL(*zval_p)
#define Z_ARRVAL_PP(zval_pp)		Z_ARRVAL(**zval_pp)

//æ“ä½œå¯¹è±¡çš„
#define Z_OBJVAL(zval)			(zval).value.obj
#define Z_OBJVAL_P(zval_p)		Z_OBJVAL(*zval_p)
#define Z_OBJVAL_PP(zval_pp)		Z_OBJVAL(**zval_pp)

#define Z_OBJ_HANDLE(zval)		Z_OBJVAL(zval).handle
#define Z_OBJ_HANDLE_P(zval_p)		Z_OBJ_HANDLE(*zval_p)
#define Z_OBJ_HANDLE_PP(zval_p)		Z_OBJ_HANDLE(**zval_p)

#define Z_OBJ_HT(zval)			Z_OBJVAL(zval).handlers
#define Z_OBJ_HT_P(zval_p)		Z_OBJ_HT(*zval_p)
#define Z_OBJ_HT_PP(zval_p)		Z_OBJ_HT(**zval_p)

#define Z_OBJCE(zval)			zend_get_class_entry(&amp;(zval) TSRMLS_CC)
#define Z_OBJCE_P(zval_p)		Z_OBJCE(*zval_p)
#define Z_OBJCE_PP(zval_pp)		Z_OBJCE(**zval_pp)

#define Z_OBJPROP(zval)			Z_OBJ_HT((zval))-&gt;get_properties(&amp;(zval) TSRMLS_CC)
#define Z_OBJPROP_P(zval_p)		Z_OBJPROP(*zval_p)
#define Z_OBJPROP_PP(zval_pp)		Z_OBJPROP(**zval_pp)

#define Z_OBJ_HANDLER(zval, hf) 	Z_OBJ_HT((zval))-&gt;hf
#define Z_OBJ_HANDLER_P(zval_p, h)	Z_OBJ_HANDLER(*zval_p, h)
#define Z_OBJ_HANDLER_PP(zval_p, h)		Z_OBJ_HANDLER(**zval_p, h)

#define Z_OBJDEBUG(zval,is_tmp)		(Z_OBJ_HANDLER((zval),get_debug_info)?	\
						Z_OBJ_HANDLER((zval),get_debug_info)(&amp;(zval),&amp;is_tmp TSRMLS_CC): \
						(is_tmp=0,Z_OBJ_HANDLER((zval),get_properties)?Z_OBJPROP(zval):NULL)) 
#define Z_OBJDEBUG_P(zval_p,is_tmp)	Z_OBJDEBUG(*zval_p,is_tmp) 
#define Z_OBJDEBUG_PP(zval_pp,is_tmp)	Z_OBJDEBUG(**zval_pp,is_tmp)

//æ“ä½œèµ„æºçš„
#define Z_RESVAL(zval)			(zval).value.lval
#define Z_RESVAL_P(zval_p)		Z_RESVAL(*zval_p)
#define Z_RESVAL_PP(zval_pp)		Z_RESVAL(**zval_pp)
</code></pre>
<h2 id="åˆ›å»ºzval">åˆ›å»ºzval</h2>
<pre><code class="language-c">ALLOC_ZVAL              // PHP 7ä¸­ç§»é™¤
ALLOC_INIT_ZVAL         // PHP 7ä¸­ç§»é™¤
MAKE_STD_ZVAL           // PHP 7ä¸­ç§»é™¤
// ä¾‹å¦‚ï¼š
zval *val; MAKE_STD_ZVAL(val);

ZVAL_LONG(*zval, long)      // å°†æ•´å‹å€¼èµ‹ç»™*zval
ZVAL_NULL(*zval)            // null
ZVAL_BOOL(*zval, int)       // bool
ZVAL_TRUE(*zval)            // true
ZVAL_FALSE(*zval)           // false
ZVAL_LONG(*zval, long)      // long
ZVAL_DOUBLE(*zval, double)  // double
ZVAL_STRINGL(*zval,str,len,dup); // string with length
ZVAL_STRING(*zval, str, dup)     // string, dupæŒ‡æ˜äº†è¯¥å­—ç¬¦ä¸²æ˜¯å¦éœ€è¦è¢«å¤åˆ¶ã€‚ å€¼ä¸º 1 å°†å…ˆç”³è¯·ä¸€å—æ–°å†…å­˜å¹¶èµ‹å€¼è¯¥å­—ç¬¦ä¸²ï¼Œç„¶åæŠŠæ–°å†…å­˜çš„åœ°å€å¤åˆ¶ç»™pzvï¼Œ ä¸º 0 æ—¶åˆ™æ˜¯ç›´æ¥æŠŠstrçš„åœ°å€èµ‹å€¼ç»™zvalã€‚
ZVAL_RESOURCE(*zval, res);       // resource
</code></pre>
<h2 id="å‡½æ•°ç›¸å…³">å‡½æ•°ç›¸å…³</h2>
<pre><code class="language-c">ZEND_NUM_ARGS()             // è·å–å‡½æ•°å‚æ•°çš„æ•°é‡

RETVAL_STRING(s)            // å‡½æ•°è¿”å›å­—ç¬¦ä¸²
RETURN_STRING(s)            // å‡½æ•°è¿”å›å­—ç¬¦ä¸², #define RETURN_STRING(s) { RETVAL_STRING(s); return; }
RETURN_NULL()               // å‡½æ•°è¿”å›null
RETURN_TRUE()               // å‡½æ•°è¿”å›true
</code></pre>
<blockquote>
<p>é™„ï¼šPHP 7ä¸­ä½¿ç”¨FAST_ZPPæ–¹å¼è§£æå‡½æ•°å‚æ•°çš„å®ï¼š<br>
<img src="media/16078683686223/16078723189095.jpg" alt="" loading="lazy"></p>
</blockquote>
<h2 id="æ•°ç»„æ“ä½œ">æ•°ç»„æ“ä½œ</h2>
<pre><code class="language-c">ZEND_HASH_FOREACH_VAL(ht, val)
ZEND_HASH_FOREACH_KEY(ht, h, key) 
ZEND_HASH_FOREACH_PTR(ht, ptr)
ZEND_HASH_FOREACH_NUM_KEY(ht, h) 
ZEND_HASH_FOREACH_STR_KEY(ht, key)
ZEND_HASH_FOREACH_STR_KEY_VAL(ht, key, val)
ZEND_HASH_FOREACH_KEY_VAL(ht, h, key, val)

// ä¾‹å¦‚ï¼š
ZEND_HASH_FOREACH_KEY_VAL(arr_hash, num_key, key, val) {
    //if (key) { //HASH_KEY_IS_STRING
    //}
    PHPWRITE(Z_STRVAL_P(val), Z_STRLEN_P(val));
    php_printf(&quot;\n&quot;);
}ZEND_HASH_FOREACH_END();
</code></pre>
<h2 id="ç¬¦å·è¡¨">ç¬¦å·è¡¨</h2>
<p>PHPçš„å˜é‡å­˜å‚¨åœ¨ç¬¦å·è¡¨ä¸­ï¼Œä¸åŒä½œç”¨åŸŸæœ‰ä¸åŒçš„ç¬¦å·è¡¨ã€‚</p>
<pre><code class="language-c">struct _zend_executor_globals {
    ...
    HashTable symbol_table;         // å…¨å±€ç¬¦å·è¡¨
    HashTable *active_symbol_table; // å½“å‰ä½œç”¨åŸŸç¬¦å·è¡¨
    ...
};
</code></pre>
<pre><code class="language-c">EG(active_symbol_table)
EG(symbol_table)
ZEND_SET_SYMBOL(symbol, var_name, val)  // è®¾ç½®å˜é‡åˆ°ç¬¦å·è¡¨
// ä¾‹å¦‚ï¼š
ZEND_SET_SYMBOL( EG(active_symbol_table) ,  &quot;foo&quot; , fooval);
</code></pre>
<blockquote>
<p>æœªå®Œå¾…ç»­...</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åˆä¸€ä¸ªå‘½ä»¤è¡Œç‰ˆç½‘æ˜“äº‘éŸ³ä¹â€”â€”musicfox]]></title>
        <id>/post/npa_TQCOL/</id>
        <link href="/post/npa_TQCOL/">
        </link>
        <updated>2020-07-12T12:01:18.000Z</updated>
        <summary type="html"><![CDATA[<p>musicfoxæ˜¯ä¸€æ¬¾ä½¿ç”¨Dartç¼–å†™çš„ç½‘æ˜“äº‘éŸ³ä¹å‘½ä»¤è¡Œç¨‹åºã€‚</p>
<p><img src="https://badgen.net/github/release/anhoder/musicfox" alt="last release" loading="lazy"><img src="https://badgen.net/github/license/anhoder/musicfox" alt="GitHub" loading="lazy"><img src="https://badgen.net/github/tag/anhoder/musicfox" alt="Last Tag" loading="lazy"><img src="https://badgen.net/github/stars/anhoder/musicfox" alt="Star" loading="lazy"><img src="https://badgen.net/github/last-commit/anhoder/musicfox" alt="GitHub last commit" loading="lazy"></p>
]]></summary>
        <content type="html"><![CDATA[<p>musicfoxæ˜¯ä¸€æ¬¾ä½¿ç”¨Dartç¼–å†™çš„ç½‘æ˜“äº‘éŸ³ä¹å‘½ä»¤è¡Œç¨‹åºã€‚</p>
<p><img src="https://badgen.net/github/release/anhoder/musicfox" alt="last release" loading="lazy"><img src="https://badgen.net/github/license/anhoder/musicfox" alt="GitHub" loading="lazy"><img src="https://badgen.net/github/tag/anhoder/musicfox" alt="Last Tag" loading="lazy"><img src="https://badgen.net/github/stars/anhoder/musicfox" alt="Star" loading="lazy"><img src="https://badgen.net/github/last-commit/anhoder/musicfox" alt="GitHub last commit" loading="lazy"></p>
<!-- more -->
<h2 id="ä¸€-ä¸ºä»€ä¹ˆåšè¿™ä¸ªé¡¹ç›®">ä¸€ã€ä¸ºä»€ä¹ˆåšè¿™ä¸ªé¡¹ç›®</h2>
<p>åœ¨å¼€å§‹è¿™ä¸ªé¡¹ç›®çš„ä¹‹å‰ï¼Œå…¶å®æ˜¯å·²ç»æœ‰ä¸€ä¸ªåŸºäºå‘½ä»¤è¡Œçš„ç½‘æ˜“äº‘éŸ³ä¹é¡¹ç›®â€”â€”<a href="https://github.com/darknessomi/musicbox" title="musicbox">musicbox</a>ã€‚</p>
<p>æˆ‘ä¹Ÿä½¿ç”¨å®ƒå¬äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„æ­Œäº†ï¼Œå…¶ä¸­è¿˜è´¡çŒ®è¿‡ä¸€äº›ä»£ç ï¼Œä¿®å¤å‡ ä¸ªå°é—®é¢˜ã€‚é‚£ä¸ºä»€ä¹ˆè¿˜è¦é‡æ–°é€ ä¸€ä¸ªè½®å­å‘¢ï¼Ÿ</p>
<blockquote>
<ol>
<li>musicboxç¼ºå°‘ä¸€äº›æˆ‘ç‰¹åˆ«æƒ³è¦çš„åŠŸèƒ½</li>
<li>musicboxä½¿ç”¨pythonè¿›è¡Œç¼–å†™ï¼Œæˆ‘å¯¹pythonå¹¶ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥ä¿®æ”¹æˆ–è€…æ–°å¢åŠŸèƒ½æ—¶æ¯”è¾ƒéº»çƒ¦</li>
</ol>
</blockquote>
<h2 id="äºŒ-ä¸ºä»€ä¹ˆä½¿ç”¨dart">äºŒã€ä¸ºä»€ä¹ˆä½¿ç”¨Dart</h2>
<ul>
<li>Dartçš„è¯­æ³•æåƒJavaï¼Œæˆ‘æœ¬èº«ä¹Ÿå­¦è¿‡Javaï¼Œå› æ­¤å­¦ä¹ æˆæœ¬è¾ƒä½ï¼›</li>
<li>Dartå¯ä»¥å°†ä»£ç ç¼–è¯‘æˆèƒ½åœ¨ä¸‰å¤§å¹³å°ï¼ˆWindowsã€Linuxã€Macï¼‰ä¸Šç›´æ¥è¿è¡Œçš„å¯æ‰§è¡Œç¨‹åºã€‚</li>
</ul>
<h2 id="ä¸‰-æ•ˆæœé¢„è§ˆ">ä¸‰ã€æ•ˆæœé¢„è§ˆ</h2>
<figure data-type="image" tabindex="1"><img src="/post-images/1617678066308.png" alt="æ¬¢è¿ç•Œé¢" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="/post-images/1617678078304.png" alt="ä¸»ç•Œé¢1" loading="lazy"></figure>
<figure data-type="image" tabindex="3"><img src="/post-images/1617678089104.png" alt="ä¸»ç•Œé¢2" loading="lazy"></figure>
<h2 id="å››-å®‰è£…">å››ã€å®‰è£…</h2>
<p>ä¾èµ–mpg123ï¼Œ<strong>å¿…é¡»å…ˆå®‰è£…mpg123</strong></p>
<h3 id="mac">Mac</h3>
<p>æä¾›ä¸¤ç§æ–¹å¼å®‰è£…ï¼š</p>
<ol>
<li>è¿›å…¥åˆ°<a href="https://github.com/anhoder/musicfox/releases/latest" title="Release">Release</a>ä¸‹è½½musicfox.macæ–‡ä»¶ï¼Œåœ¨iTermæˆ–Terminalä¸­è¿è¡Œ</li>
<li>ä½¿ç”¨brewå®‰è£…ï¼š</li>
</ol>
<pre><code class="language-sh">brew tap anhoder/musicfox &amp;&amp; brew install musicfox
</code></pre>
<h3 id="linuxubuntu">Linux(Ubuntu)</h3>
<p>è¿›å…¥åˆ°<a href="https://github.com/anhoder/musicfox/releases/latest" title="Release">Release</a>ä¸‹è½½musicfox.ubuntuæ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œã€‚</p>
<blockquote>
<p>æœ¬äººæ²¡æœ‰Linuxç³»ç»Ÿï¼Œè¯¥æ‰§è¡Œæ–‡ä»¶æ˜¯åœ¨WSL2(Ubuntu 2004)ä¸‹æ‰“åŒ…çš„ï¼Œä¸ç¡®å®šå…¶ä»–Linuxç³»ç»Ÿæ˜¯å¦ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨</p>
</blockquote>
<h3 id="windows">Windows</h3>
<p>ä¸‹è½½<a href="./bin/musicfox.exe" title="Windowså¯æ‰§è¡Œæ–‡ä»¶">Windowså¯æ‰§è¡Œæ–‡ä»¶</a>ï¼Œåœ¨å‘½ä»¤è¡Œ(æ¨èWindows Terminal)ä¸­è¿è¡Œå³å¯ã€‚</p>
<p><strong>Windowsä¸‹å­˜åœ¨å‡ ä¸ªå·²çŸ¥é—®é¢˜ï¼Œæš‚æ—¶æ²¡æœ‰è§£å†³æ–¹æ³•ï¼š</strong></p>
<ol>
<li>æš‚åœæ—¶ä¼šå»¶è¿Ÿå‡ ç§’ï¼Œæ’­æ”¾æ—¶ä¸ä¼šå»¶è¿Ÿ</li>
<li>ç™»å½•æˆ–æœç´¢è¾“å…¥æ—¶ï¼Œä¼šåæ‰ç¬¬ä¸€ä¸ªå­—ç¬¦</li>
<li>ä¸Šã€ä¸‹ã€å·¦ã€å³åŠESCé”®æ— æ³•ç›‘å¬ï¼Œåªèƒ½ä½¿ç”¨å­—æ¯ä»£æ›¿è¿™äº›æ“ä½œ</li>
<li>å‘½ä»¤è¡Œçª—å£å¤§å°å‘ç”Ÿå˜åŒ–åï¼ŒUIä¼šå˜ä¹±ï¼ˆå› ä¸ºWindowsä¸æ”¯æŒresizeäº‹ä»¶ï¼‰</li>
</ol>
<p><em>å› ä¸ºå­˜åœ¨ä»¥ä¸Šé—®é¢˜ï¼Œæ‰€ä»¥æ¨èåœ¨WSLä¸‹ä½¿ç”¨ï¼ŒWSLçš„å£°éŸ³è½¬å‘å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ä¸ª<a href="https://github.com/anhoder/wsl-audio-musicbox" title="é¡¹ç›®">é¡¹ç›®</a></em>ã€‚</p>
<h2 id="äº”-é€šçŸ¥åŠŸèƒ½">äº”ã€é€šçŸ¥åŠŸèƒ½</h2>
<h3 id="mac-2">Mac</h3>
<p>Macä¸‹é»˜è®¤ä½¿ç”¨<code>AppleScript</code>å‘é€é€šçŸ¥ã€‚å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="4"><img src="/post-images/1617678108326.png" alt="AppleScript" loading="lazy"></figure>
<p>å¦‚æœæƒ³è¦æ›´å¥½çš„é€šçŸ¥ä½“éªŒï¼Œå¯ä»¥å®‰è£…<code>terminal-notifier</code>:</p>
<pre><code class="language-sh">brew install terminal-notifier
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="5"><img src="/post-images/1617678123055.png" alt="terminal-notifier" loading="lazy"></figure>
<h3 id="linux">Linux</h3>
<p>Linuxå¯ä»¥å®‰è£…<code>libnotify-bin</code>æ¥ä½¿ç”¨é€šçŸ¥åŠŸèƒ½ï¼ˆæœªç»æµ‹è¯•ï¼‰</p>
<h3 id="windows-2">Windows</h3>
<p>Windowsä¸‹å¯ä»¥å®‰è£…<code>notifu</code>å®ç°é€šçŸ¥ï¼Œä½“éªŒä¸å¤ªå¥½ï¼ˆæ²¡æ‰¾åˆ°å…¶ä»–æ›´å¥½çš„é€šçŸ¥å·¥å…·ï¼‰</p>
<blockquote>
<p>å½“ç„¶ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„å‘½ä»¤è¡Œé€šçŸ¥ç¨‹åºï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å®ç°INotifieræ¥å£è¾¾åˆ°ä½ æƒ³è¦çš„æ•ˆæœï¼š</p>
<pre><code class="language-dart">abstract class INotifier {
  // æ£€æŸ¥è¯¥é€šçŸ¥ç¨‹åºæ˜¯å¦å¯ç”¨
  bool isAvailable();

  // å‘é€æ¶ˆæ¯
  void send(String message, {String title, String subtitle, String soundName, String groupID, String activateID, String appIcon, String contentImage, String openURL, String executeCmd});
}
</code></pre>
</blockquote>
<h2 id="å…­-ä½¿ç”¨">å…­ã€ä½¿ç”¨</h2>
<pre><code class="language-sh">$ musicfox
</code></pre>
<p><strong>æŒ‰é”®ï¼š</strong></p>
<table>
<thead>
<tr>
<th>æŒ‰é”®</th>
<th>ä½œç”¨</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>h/H/LEFT</td>
<td>å·¦</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>h</code></td>
</tr>
<tr>
<td>l/L/RIGHT</td>
<td>å³</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>l</code></td>
</tr>
<tr>
<td>k/K/UP</td>
<td>ä¸Š</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>k</code></td>
</tr>
<tr>
<td>j/J/DOWN</td>
<td>ä¸‹</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>j</code></td>
</tr>
<tr>
<td>q/Q</td>
<td>é€€å‡º</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>q</code></td>
</tr>
<tr>
<td>space</td>
<td>æš‚åœ/æ’­æ”¾</td>
<td></td>
</tr>
<tr>
<td>[</td>
<td>ä¸Šä¸€æ›²</td>
<td></td>
</tr>
<tr>
<td>]</td>
<td>ä¸‹ä¸€æ›²</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>å‡å°éŸ³é‡</td>
<td></td>
</tr>
<tr>
<td>=</td>
<td>åŠ å¤§éŸ³é‡</td>
<td></td>
</tr>
<tr>
<td>n/N/ENTER</td>
<td>è¿›å…¥é€‰ä¸­çš„èœå•</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>n</code></td>
</tr>
<tr>
<td>b/B/ESC</td>
<td>è¿”å›ä¸Šçº§èœå•</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>b</code></td>
</tr>
<tr>
<td>w/W</td>
<td>é€€å‡ºå¹¶é€€å‡ºç™»å½•</td>
<td>Windowsåªèƒ½ä½¿ç”¨<code>w</code></td>
</tr>
<tr>
<td>p</td>
<td>åˆ‡æ¢æ’­æ”¾æ–¹å¼</td>
<td></td>
</tr>
<tr>
<td>P</td>
<td>å¿ƒåŠ¨æ¨¡å¼(ä»…åœ¨æ­Œå•ä¸­æ—¶æœ‰æ•ˆ)</td>
<td>Windowsä¸‹ä½¿ç”¨<code>o</code></td>
</tr>
<tr>
<td>,</td>
<td>å–œæ¬¢å½“å‰æ’­æ”¾æ­Œæ›²</td>
<td></td>
</tr>
<tr>
<td>&lt;</td>
<td>å–œæ¬¢å½“å‰é€‰ä¸­æ­Œæ›²</td>
<td>Windowsä¸‹ä½¿ç”¨<code>;</code></td>
</tr>
<tr>
<td>.</td>
<td>å½“å‰æ’­æ”¾æ­Œæ›²ç§»é™¤å‡ºå–œæ¬¢</td>
<td></td>
</tr>
<tr>
<td>&gt;</td>
<td>å½“å‰é€‰ä¸­æ­Œæ›²ç§»é™¤å‡ºå–œæ¬¢</td>
<td>Windowsä¸‹ä½¿ç”¨<code>'</code></td>
</tr>
<tr>
<td>/</td>
<td>æ ‡è®°å½“å‰æ’­æ”¾æ­Œæ›²ä¸ºä¸å–œæ¬¢</td>
<td></td>
</tr>
<tr>
<td>?</td>
<td>æ ‡è®°å½“å‰é€‰ä¸­æ­Œæ›²ä¸ºä¸å–œæ¬¢</td>
<td>Windowsä¸‹ä½¿ç”¨<code>\</code></td>
</tr>
</tbody>
</table>
<h2 id="ä¸ƒ-todo">ä¸ƒã€TODO</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-1537864"><label class="task-list-item-label" for="task-item-1537864"> æˆ‘çš„æ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-7505592"><label class="task-list-item-label" for="task-item-7505592"> æ¯æ—¥æ¨èæ­Œæ›²</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8991295"><label class="task-list-item-label" for="task-item-8991295"> æ¯æ—¥æ¨èæ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-4142288"><label class="task-list-item-label" for="task-item-4142288"> ç§äººFM</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-2796177"><label class="task-list-item-label" for="task-item-2796177"> æ­Œè¯æ˜¾ç¤º</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-1300158"><label class="task-list-item-label" for="task-item-1300158"> æ¬¢è¿ç•Œé¢</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-6567607"><label class="task-list-item-label" for="task-item-6567607"> æœç´¢</label>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-7212717"><label class="task-list-item-label" for="task-item-7212717"> æŒ‰æ­Œæ›²</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-9267184"><label class="task-list-item-label" for="task-item-9267184"> æŒ‰æ­Œæ‰‹</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8832176"><label class="task-list-item-label" for="task-item-8832176"> æŒ‰æ­Œè¯</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-5146545"><label class="task-list-item-label" for="task-item-5146545"> æŒ‰æ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-6422934"><label class="task-list-item-label" for="task-item-6422934"> æŒ‰ä¸“è¾‘</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-213351"><label class="task-list-item-label" for="task-item-213351"> æŒ‰ç”¨æˆ·</label></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-3117403"><label class="task-list-item-label" for="task-item-3117403"> æ’è¡Œæ¦œ</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-9907933"><label class="task-list-item-label" for="task-item-9907933"> ç²¾é€‰æ­Œå•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-3365520"><label class="task-list-item-label" for="task-item-3365520"> æœ€æ–°ä¸“è¾‘</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-8970588"><label class="task-list-item-label" for="task-item-8970588"> çƒ­é—¨æ­Œæ‰‹</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-2202903"><label class="task-list-item-label" for="task-item-2202903"> äº‘ç›˜</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-2252654"><label class="task-list-item-label" for="task-item-2252654"> æ’­æ”¾æ–¹å¼åˆ‡æ¢</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-9312187"><label class="task-list-item-label" for="task-item-9312187"> å–œæ¬¢/å–æ¶ˆå–œæ¬¢</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox" id="task-item-9943735"><label class="task-list-item-label" for="task-item-9943735"> å¿ƒåŠ¨æ¨¡å¼/æ™ºèƒ½æ¨¡å¼</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-4523947"><label class="task-list-item-label" for="task-item-4523947"> éŸ³ä¹ç”µå°</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-9246725"><label class="task-list-item-label" for="task-item-9246725"> å°†éƒ¨åˆ†è®¾ç½®è½¬åŒ–ä¸ºæ–‡ä»¶å¯é…ç½®</label>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-9055213"><label class="task-list-item-label" for="task-item-9055213"> æ¬¢è¿ç•Œé¢çš„æ¬¢è¿è¯­</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-4362981"><label class="task-list-item-label" for="task-item-4362981"> æ¬¢è¿ç•Œé¢æ—¶é•¿</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-4773672"><label class="task-list-item-label" for="task-item-4773672"> ä¸»é¢˜è‰²</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-5381265"><label class="task-list-item-label" for="task-item-5381265"> æ­Œè¯æ˜¾ç¤ºè¡Œæ•°</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-3400234"><label class="task-list-item-label" for="task-item-3400234"> ...</label></li>
</ul>
</li>
</ul>
<h2 id="å…«-ä¼´ç”Ÿé¡¹ç›®">å…«ã€ä¼´ç”Ÿé¡¹ç›®</h2>
<p>åœ¨è¯¥é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°†ä¸€äº›é€šç”¨çš„åŠŸèƒ½æ¨¡å—å•ç‹¬æŠ½ç¦»å‡ºæ¥ï¼Œåšæˆäº†å‡ ä¸ªä¼´ç”Ÿé¡¹ç›®ï¼š</p>
<ol>
<li><a href="https://github.com/anhoder/mp3_player" title="mp3_player">mp3_player</a>: dartå‘½ä»¤è¡Œè°ƒç”¨mpg123æ’­æ”¾éŸ³ä¹</li>
<li><a href="https://github.com/anhoder/netease_music_request" title="netease_music_request">netease_music_request</a>: Dartå®ç°çš„ç½‘æ˜“äº‘éŸ³ä¹æ¥å£åº“ï¼Œä½¿ç”¨Dioå‘èµ·è¯·æ±‚ï¼ŒCookieJarç®¡ç†Cookieä¿¡æ¯</li>
<li><a href="https://github.com/anhoder/colorful_cmd" title="colorful_cmd">colorful_cmd</a>: ä½¿ç”¨dartå®ç°çš„ä¸€äº›å‘½ä»¤è¡ŒUIç»„ä»¶ï¼Œå¦‚ï¼šWindowUIå‘½ä»¤è¡Œçª—å£åº”ç”¨UIã€RainbowProgresså½©è™¹è¿›åº¦æ¡ã€NotifierProxyä¸‰å¤§å¹³å°é€šçŸ¥ä»£ç†ã€ColorTexté¢œè‰²æ–‡æœ¬...<br>
<img src="/post-images/1617678161539.png" alt="command" loading="lazy"><br>
<img src="/post-images/1617678173841.png" alt="rainbow_progress" loading="lazy"><br>
<img src="/post-images/1617678188194.png" alt="window_ui" loading="lazy"><br>
<img src="/post-images/1617678202350.png" alt="window_ui2" loading="lazy"></li>
</ol>
<h2 id="ä¹-æ„Ÿè°¢">ä¹ã€æ„Ÿè°¢</h2>
<p>æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®åŠå…¶è´¡çŒ®è€…ä»¬ï¼ˆä¸é™äºï¼‰ï¼š</p>
<ul>
<li><a href="https://github.com/darknessomi/musicbox" title="musicbox">musicbox</a></li>
<li><a href="https://github.com/Binaryify/NeteaseCloudMusicApi" title="NeteaseCloudMusicApi">NeteaseCloudMusicApi</a></li>
<li><a href="https://github.com/DirectMyFile/console.dart" title="console.dart">console.dart</a></li>
</ul>
]]></content>
    </entry>
</feed>